{"version":3,"sources":["webpack://threejs-es6-webpack-boilerplate/./src/js/data/config.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/detector.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/controls/OrbitControls.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/loaders/OBJLoader.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/loaders/MTLLoader.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/main.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app.js"],"names":["TWEEN","Math","PI","canvas","window","CanvasRenderingContext2D","webgl","document","createElement","WebGLRenderingContext","getContext","e","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","id","style","fontFamily","fontSize","fontWeight","textAlign","background","color","padding","width","margin","this","innerHTML","join","addGetWebGLMessage","parameters","parent","undefined","body","appendChild","OrbitControls","object","domElement","offset","quat","quatInverse","lastPosition","lastQuaternion","twoPI","console","warn","error","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","touches","ONE","TOUCH","TWO","target0","clone","position0","position","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","Quaternion","setFromUnitVectors","up","invert","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","v","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","focus","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","prototype","Object","create","EventDispatcher","constructor","MapControls","call","OBJLoader","object_pattern","material_library_pattern","material_use_pattern","map_use_pattern","vA","vB","vC","ab","cb","ParserState","objects","vertices","normals","colors","uvs","materials","materialLibraries","startObject","name","fromDeclaration","previousMaterial","currentMaterial","_finalize","geometry","hasUVIndices","smooth","startMaterial","libraries","previous","inherited","groupCount","splice","index","material","mtllib","Array","isArray","groupStart","groupEnd","cloned","bind","push","end","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","value","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","a","b","c","src","dst","addVertexPoint","addVertexLine","addNormal","addFaceNormal","fromArray","cross","normalize","z","addColor","addUV","addDefaultUV","addUVLine","addFace","ua","ub","uc","na","nb","nc","vLen","ia","ib","ic","nLen","uvLen","addPointGeometry","vi","l","addLineGeometry","uvi","manager","Loader","assign","load","url","onLoad","onProgress","onError","loader","FileLoader","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","text","parse","itemError","setMaterials","indexOf","replace","lines","split","line","lineFirstChar","result","trimLeft","i","trim","charAt","data","parseFloat","vertexData","substr","faceVertices","j","jl","vertex","vertexParts","v1","v2","v3","lineParts","substring","lineVertices","lineUVs","li","llen","parts","pointData","exec","test","toLowerCase","container","Group","concat","isLine","isPoints","hasVertexColors","buffergeometry","BufferGeometry","setAttribute","Float32BufferAttribute","mesh","createdMaterials","miLen","materialHash","sourceMaterial","LineBasicMaterial","PointsMaterial","materialPoints","size","sizeAttenuation","Material","map","materialLine","MeshPhongMaterial","flatShading","vertexColors","addGroup","LineSegments","Points","Mesh","points","MTLLoader","qs","search","reduce","res","cur","arr","LoaderUtils","setMaterialOptions","materialOptions","info","delimiter_pattern","materialsInfo","pos","key","ss","materialCreator","MaterialCreator","resourcePath","setCrossOrigin","crossOrigin","setManager","baseUrl","options","materialsArray","nameLookup","side","FrontSide","wrap","RepeatWrapping","convert","converted","mn","mat","covmat","prop","save","lprop","normalizeRGB","ignoreZeroRGBs","preload","getIndex","materialName","getAsArray","createMaterial_","params","setMapForType","mapType","texParams","getTextureParams","loadTexture","repeat","wrapS","wrapT","n","Color","specular","emissive","transparent","shininess","opacity","invertTrProperty","matParams","items","bumpScale","mapping","texture","DefaultLoadingManager","getHandler","TextureLoader","Main","renderer","scene","camera","modelName","urlArgs","location","onWindowResize","setSize","innerWidth","innerHeight","aspect","render","model","THREE","antialias","alpha","setClearColor","outputEncoding","log","updateMatrixWorld","box","setFromObject","boxSize","getSize","center","getCenter","setContent","xhr","lengthComputable","percentComplete","loaded","total","round","item","controls","light","mtlloader","obj","init","animate","requestAnimationFrame","Detector","getElementById"],"mappings":"uJAaUA,0BAsDSC,KAAKC,GACLD,KAAKC,GAjExB,MCEA,GACEC,SAAUC,OAAOC,yBACjBC,MAAQ,WACN,IACE,IAAIH,EAASI,SAASC,cAAc,UAEpC,SAAUJ,OAAOK,wBAA0BN,EAAOO,WAAW,WAAYP,EAAOO,WAAW,uBAC3F,MAAMC,GACN,OAAO,GANH,GAURC,UAAWR,OAAOS,OAClBC,QAASV,OAAOW,MAAQX,OAAOY,YAAcZ,OAAOa,UAAYb,OAAOc,KAEvEC,qBAAsB,WACpB,IAAIC,EAAUb,SAASC,cAAc,OAsBrC,OArBAY,EAAQC,GAAK,sBACbD,EAAQE,MAAMC,WAAa,YAC3BH,EAAQE,MAAME,SAAW,OACzBJ,EAAQE,MAAMG,WAAa,SAC3BL,EAAQE,MAAMI,UAAY,SAC1BN,EAAQE,MAAMK,WAAa,OAC3BP,EAAQE,MAAMM,MAAQ,OACtBR,EAAQE,MAAMO,QAAU,QACxBT,EAAQE,MAAMQ,MAAQ,QACtBV,EAAQE,MAAMS,OAAS,aAEnBC,KAAK1B,QACPc,EAAQa,UAAY7B,OAAOK,sBAAwB,CACjD,4JACA,0FACAyB,KAAK,MAAQ,CACb,qJACA,0FACAA,KAAK,OAGFd,GAGTe,mBAAoB,SAASC,GAC3B,IAAIC,EAAQhB,EAAID,EAIhBiB,OAA+BC,KAF/BF,EAAaA,GAAc,IAEPC,OAAuBD,EAAWC,OAAS9B,SAASgC,KACxElB,OAAuBiB,IAAlBF,EAAWf,GAAmBe,EAAWf,GAAK,SAEnDD,EAAUY,KAAKb,wBACPE,GAAKA,EAEbgB,EAAOG,YAAYpB,K,aCxCnBqB,EAAgB,SAAWC,EAAQC,GAyHxB,IAETC,EAGAC,EACAC,EAEAC,EACAC,EAEAC,OAlIeX,IAAfK,GAA2BO,QAAQC,KAAM,4EACzCR,IAAepC,UAAW2C,QAAQE,MAAO,4HAE9CpB,KAAKU,OAASA,EACdV,KAAKW,WAAaA,EAGlBX,KAAKqB,SAAU,EAGfrB,KAAKsB,OAAS,IAAIC,MAGlBvB,KAAKwB,YAAc,EACnBxB,KAAKyB,YAAcC,IAGnB1B,KAAK2B,QAAU,EACf3B,KAAK4B,QAAUF,IAIf1B,KAAK6B,cAAgB,EACrB7B,KAAK8B,cAAgB7D,KAAKC,GAI1B8B,KAAK+B,iBAAoBL,IACzB1B,KAAKgC,gBAAkBN,IAIvB1B,KAAKiC,eAAgB,EACrBjC,KAAKkC,cAAgB,IAIrBlC,KAAKmC,YAAa,EAClBnC,KAAKoC,UAAY,EAGjBpC,KAAKqC,cAAe,EACpBrC,KAAKsC,YAAc,EAGnBtC,KAAKuC,WAAY,EACjBvC,KAAKwC,SAAW,EAChBxC,KAAKyC,oBAAqB,EAC1BzC,KAAK0C,YAAc,EAInB1C,KAAK2C,YAAa,EAClB3C,KAAK4C,gBAAkB,EAGvB5C,KAAK6C,KAAO,CAAEC,KAAM,GAAIC,GAAI,GAAIC,MAAO,GAAIC,OAAQ,IAGnDjD,KAAKkD,aAAe,CAAEJ,KAAMK,aAAcC,OAAQD,YAAaH,MAAOG,WAGtEnD,KAAKqD,QAAU,CAAEC,IAAKC,aAAcC,IAAKD,iBAGzCvD,KAAKyD,QAAUzD,KAAKsB,OAAOoC,QAC3B1D,KAAK2D,UAAY3D,KAAKU,OAAOkD,SAASF,QACtC1D,KAAK6D,MAAQ7D,KAAKU,OAAOoD,KAGzB9D,KAAK+D,qBAAuB,KAM5B/D,KAAKgE,cAAgB,WAEpB,OAAOC,EAAUC,KAIlBlE,KAAKmE,kBAAoB,WAExB,OAAOF,EAAUG,OAIlBpE,KAAKqE,kBAAoB,SAAW1D,GAEnCA,EAAW2D,iBAAkB,UAAWC,GACxCvE,KAAK+D,qBAAuBpD,GAI7BX,KAAKwE,UAAY,WAEhBC,EAAMhB,QAAQiB,KAAMD,EAAMnD,QAC1BmD,EAAMd,UAAUe,KAAMD,EAAM/D,OAAOkD,UACnCa,EAAMZ,MAAQY,EAAM/D,OAAOoD,MAI5B9D,KAAK2E,MAAQ,WAEZF,EAAMnD,OAAOoD,KAAMD,EAAMhB,SACzBgB,EAAM/D,OAAOkD,SAASc,KAAMD,EAAMd,WAClCc,EAAM/D,OAAOoD,KAAOW,EAAMZ,MAE1BY,EAAM/D,OAAOkE,yBACbH,EAAMI,cAAeC,GAErBL,EAAMM,SAENC,EAAQC,EAAMC,MAKflF,KAAK+E,QAEAnE,EAAS,IAAIW,MAGbV,GAAO,IAAIsE,OAAaC,mBAAoB1E,EAAO2E,GAAI,IAAI9D,MAAS,EAAG,EAAG,IAC1ET,EAAcD,EAAK6C,QAAQ4B,SAE3BvE,EAAe,IAAIQ,MACnBP,EAAiB,IAAImE,MAErBlE,EAAQ,EAAIhD,KAAKC,GAEd,WAEN,IAAI0F,EAAWa,EAAM/D,OAAOkD,SAE5BhD,EAAO8D,KAAMd,GAAW2B,IAAKd,EAAMnD,QAGnCV,EAAO4E,gBAAiB3E,GAGxBoD,EAAUwB,eAAgB7E,GAErB6D,EAAM9B,YAAcqC,IAAUC,EAAMC,MAExCQ,EA0LK,EAAIzH,KAAKC,GAAK,GAAK,GAAKuG,EAAM7B,iBAtL/B6B,EAAMxC,eAEVgC,EAAUG,OAASuB,EAAevB,MAAQK,EAAMvC,cAChD+B,EAAUC,KAAOyB,EAAezB,IAAMO,EAAMvC,gBAI5C+B,EAAUG,OAASuB,EAAevB,MAClCH,EAAUC,KAAOyB,EAAezB,KAMjC,IAAI0B,EAAMnB,EAAM1C,gBACZ8D,EAAMpB,EAAMzC,gBA2EhB,OAzEK8D,SAAUF,IAASE,SAAUD,KAE5BD,GAAQ3H,KAAKC,GAAK0H,GAAO3E,EAAiB2E,EAAM3H,KAAKC,KAAK0H,GAAO3E,GAEjE4E,GAAQ5H,KAAKC,GAAK2H,GAAO5E,EAAiB4E,EAAM5H,KAAKC,KAAK2H,GAAO5E,GAIrEgD,EAAUG,MAFNwB,GAAOC,EAEO5H,KAAK4H,IAAKD,EAAK3H,KAAK2H,IAAKC,EAAK5B,EAAUG,QAItCH,EAAUG,OAAUwB,EAAMC,GAAQ,EACrD5H,KAAK4H,IAAKD,EAAK3B,EAAUG,OACzBnG,KAAK2H,IAAKC,EAAK5B,EAAUG,QAO5BH,EAAUC,IAAMjG,KAAK4H,IAAKpB,EAAM5C,cAAe5D,KAAK2H,IAAKnB,EAAM3C,cAAemC,EAAUC,MAExFD,EAAU8B,WAGV9B,EAAU+B,QAAUC,EAGpBhC,EAAU+B,OAAS/H,KAAK4H,IAAKpB,EAAMjD,YAAavD,KAAK2H,IAAKnB,EAAMhD,YAAawC,EAAU+B,UAI1D,IAAxBvB,EAAMxC,cAEVwC,EAAMnD,OAAO4E,gBAAiBC,EAAW1B,EAAMvC,eAI/CuC,EAAMnD,OAAO8E,IAAKD,GAInBvF,EAAOyF,iBAAkBpC,GAGzBrD,EAAO4E,gBAAiB1E,GAExB8C,EAASc,KAAMD,EAAMnD,QAAS8E,IAAKxF,GAEnC6D,EAAM/D,OAAO4F,OAAQ7B,EAAMnD,SAEE,IAAxBmD,EAAMxC,eAEV0D,EAAevB,OAAW,EAAIK,EAAMvC,cACpCyD,EAAezB,KAAS,EAAIO,EAAMvC,cAElCiE,EAAUI,eAAgB,EAAI9B,EAAMvC,iBAIpCyD,EAAea,IAAK,EAAG,EAAG,GAE1BL,EAAUK,IAAK,EAAG,EAAG,IAItBP,EAAQ,KAMHQ,GACJ1F,EAAa2F,kBAAmBjC,EAAM/D,OAAOkD,UAAa+C,GAC1D,GAAM,EAAI3F,EAAe4F,IAAKnC,EAAM/D,OAAOmG,aAAiBF,KAE5DlC,EAAMI,cAAeC,GAErB/D,EAAa2D,KAAMD,EAAM/D,OAAOkD,UAChC5C,EAAe0D,KAAMD,EAAM/D,OAAOmG,YAClCJ,GAAc,GAEP,KAUVzG,KAAK8G,QAAU,WAEdrC,EAAM9D,WAAWoG,oBAAqB,cAAeC,IAErDvC,EAAM9D,WAAWoG,oBAAqB,cAAeE,GACrDxC,EAAM9D,WAAWoG,oBAAqB,QAASG,GAE/CzC,EAAM9D,WAAWoG,oBAAqB,aAAcI,GACpD1C,EAAM9D,WAAWoG,oBAAqB,WAAYK,IAClD3C,EAAM9D,WAAWoG,oBAAqB,YAAaM,GAEnD5C,EAAM9D,WAAW2G,cAAcP,oBAAqB,cAAeQ,GACnE9C,EAAM9D,WAAW2G,cAAcP,oBAAqB,YAAaS,GAG7B,OAA/B/C,EAAMV,sBAEVU,EAAMV,qBAAqBgD,oBAAqB,UAAWxC,IAY7D,IAAIE,EAAQzE,KAER8E,EAAc,CAAE2C,KAAM,UACtBC,EAAa,CAAED,KAAM,SACrBE,EAAW,CAAEF,KAAM,OAEnBxC,EAAQ,CACXC,MAAQ,EACR0C,OAAQ,EACRC,MAAO,EACPC,IAAK,EACLC,aAAc,EACdC,UAAW,EACXC,gBAAiB,EACjBC,mBAAoB,GAGjBlD,EAAQC,EAAMC,KAEdyB,EAAM,KAGN1C,EAAY,IAAIkE,KAChBxC,EAAiB,IAAIwC,KAErBlC,EAAQ,EACRE,EAAY,IAAI5E,MAChBkF,GAAc,EAEd2B,EAAc,IAAIC,MAClBC,EAAY,IAAID,MAChBE,EAAc,IAAIF,MAElBG,EAAW,IAAIH,MACfI,EAAS,IAAIJ,MACbK,EAAW,IAAIL,MAEfM,EAAa,IAAIN,MACjBO,EAAW,IAAIP,MACfQ,EAAa,IAAIR,MAQrB,SAASS,IAER,OAAO7K,KAAK8K,IAAK,IAAMtE,EAAMrC,WAI9B,SAASsD,EAAYsD,GAEpBrD,EAAevB,OAAS4E,EAIzB,SAASC,EAAUD,GAElBrD,EAAezB,KAAO8E,EAIvB,IAEKE,EAFDC,GAECD,EAAI,IAAI3H,MAEL,SAAkB6H,EAAUC,GAElCH,EAAEI,oBAAqBD,EAAc,GACrCH,EAAE3C,gBAAkB6C,GAEpBjD,EAAUC,IAAK8C,KAMbK,EAAQ,WAEX,IAAIL,EAAI,IAAI3H,MAEZ,OAAO,SAAgB6H,EAAUC,IAEE,IAA7B5E,EAAMhC,mBAEVyG,EAAEI,oBAAqBD,EAAc,IAIrCH,EAAEI,oBAAqBD,EAAc,GACrCH,EAAEM,aAAc/E,EAAM/D,OAAO2E,GAAI6D,IAIlCA,EAAE3C,eAAgB6C,GAElBjD,EAAUC,IAAK8C,IAnBL,GA0BRO,EAAM,WAET,IAAI7I,EAAS,IAAIW,MAEjB,OAAO,SAAcmI,EAAQC,GAE5B,IAAIvK,EAAUqF,EAAM9D,WAEpB,GAAK8D,EAAM/D,OAAOkJ,oBAAsB,CAGvC,IAAIhG,EAAWa,EAAM/D,OAAOkD,SAC5BhD,EAAO8D,KAAMd,GAAW2B,IAAKd,EAAMnD,QACnC,IAAIuI,EAAiBjJ,EAAOkJ,SAG5BD,GAAkB5L,KAAK8L,IAAOtF,EAAM/D,OAAOsJ,IAAM,EAAM/L,KAAKC,GAAK,KAGjEiL,EAAS,EAAIO,EAASG,EAAiBzK,EAAQ6K,aAAcxF,EAAM/D,OAAOwJ,QAC1EX,EAAO,EAAII,EAASE,EAAiBzK,EAAQ6K,aAAcxF,EAAM/D,OAAOwJ,aAE7DzF,EAAM/D,OAAOyJ,sBAGxBhB,EAASO,GAAWjF,EAAM/D,OAAO0J,MAAQ3F,EAAM/D,OAAO2J,MAAS5F,EAAM/D,OAAOoD,KAAO1E,EAAQkL,YAAa7F,EAAM/D,OAAOwJ,QACrHX,EAAOI,GAAWlF,EAAM/D,OAAO6J,IAAM9F,EAAM/D,OAAO8J,QAAW/F,EAAM/D,OAAOoD,KAAO1E,EAAQ6K,aAAcxF,EAAM/D,OAAOwJ,UAKpHhJ,QAAQC,KAAM,gFACdsD,EAAMlC,WAAY,IAhCX,GAwCV,SAASkI,EAAUC,GAEbjG,EAAM/D,OAAOkJ,oBAEjB3D,GAASyE,EAEEjG,EAAM/D,OAAOyJ,sBAExB1F,EAAM/D,OAAOoD,KAAO7F,KAAK4H,IAAKpB,EAAM9C,QAAS1D,KAAK2H,IAAKnB,EAAM7C,QAAS6C,EAAM/D,OAAOoD,KAAO4G,IAC1FjG,EAAM/D,OAAOkE,yBACb6B,GAAc,IAIdvF,QAAQC,KAAM,uFACdsD,EAAMtC,YAAa,GAMrB,SAASwI,EAASD,GAEZjG,EAAM/D,OAAOkJ,oBAEjB3D,GAASyE,EAEEjG,EAAM/D,OAAOyJ,sBAExB1F,EAAM/D,OAAOoD,KAAO7F,KAAK4H,IAAKpB,EAAM9C,QAAS1D,KAAK2H,IAAKnB,EAAM7C,QAAS6C,EAAM/D,OAAOoD,KAAO4G,IAC1FjG,EAAM/D,OAAOkE,yBACb6B,GAAc,IAIdvF,QAAQC,KAAM,uFACdsD,EAAMtC,YAAa,GAUrB,SAASyI,EAAuBC,GAE/BzC,EAAY5B,IAAKqE,EAAMC,QAASD,EAAME,SAUvC,SAASC,EAAoBH,GAE5BrC,EAAShC,IAAKqE,EAAMC,QAASD,EAAME,SAwHpC,SAASE,EAAwBJ,GAEhC,GAA6B,GAAxBA,EAAMxH,QAAQyG,OAElB1B,EAAY5B,IAAKqE,EAAMxH,QAAS,GAAI6H,MAAOL,EAAMxH,QAAS,GAAI8H,WAExD,CAEN,IAAIC,EAAI,IAAQP,EAAMxH,QAAS,GAAI6H,MAAQL,EAAMxH,QAAS,GAAI6H,OAC1DG,EAAI,IAAQR,EAAMxH,QAAS,GAAI8H,MAAQN,EAAMxH,QAAS,GAAI8H,OAE9D/C,EAAY5B,IAAK4E,EAAGC,IAMtB,SAASC,EAAqBT,GAE7B,GAA6B,GAAxBA,EAAMxH,QAAQyG,OAElBtB,EAAShC,IAAKqE,EAAMxH,QAAS,GAAI6H,MAAOL,EAAMxH,QAAS,GAAI8H,WAErD,CAEN,IAAIC,EAAI,IAAQP,EAAMxH,QAAS,GAAI6H,MAAQL,EAAMxH,QAAS,GAAI6H,OAC1DG,EAAI,IAAQR,EAAMxH,QAAS,GAAI8H,MAAQN,EAAMxH,QAAS,GAAI8H,OAE9D3C,EAAShC,IAAK4E,EAAGC,IAMnB,SAASE,EAAuBV,GAE/B,IAAIW,EAAKX,EAAMxH,QAAS,GAAI6H,MAAQL,EAAMxH,QAAS,GAAI6H,MACnDO,EAAKZ,EAAMxH,QAAS,GAAI8H,MAAQN,EAAMxH,QAAS,GAAI8H,MAEnD/B,EAAWnL,KAAKyN,KAAMF,EAAKA,EAAKC,EAAKA,GAEzC9C,EAAWnC,IAAK,EAAG4C,GAoBpB,SAASuC,EAAuBd,GAE/B,GAA6B,GAAxBA,EAAMxH,QAAQyG,OAElBxB,EAAU9B,IAAKqE,EAAMxH,QAAS,GAAI6H,MAAOL,EAAMxH,QAAS,GAAI8H,WAEtD,CAEN,IAAIC,EAAI,IAAQP,EAAMxH,QAAS,GAAI6H,MAAQL,EAAMxH,QAAS,GAAI6H,OAC1DG,EAAI,IAAQR,EAAMxH,QAAS,GAAI8H,MAAQN,EAAMxH,QAAS,GAAI8H,OAE9D7C,EAAU9B,IAAK4E,EAAGC,GAInB9C,EAAYqD,WAAYtD,EAAWF,GAAc7B,eAAgB9B,EAAMnC,aAEvE,IAAIlD,EAAUqF,EAAM9D,WAEpB+E,EAAY,EAAIzH,KAAKC,GAAKqK,EAAY6C,EAAIhM,EAAQ6K,cAElDhB,EAAU,EAAIhL,KAAKC,GAAKqK,EAAY8C,EAAIjM,EAAQ6K,cAEhD7B,EAAY1D,KAAM4D,GAInB,SAASuD,EAAoBhB,GAE5B,GAA6B,GAAxBA,EAAMxH,QAAQyG,OAElBrB,EAAOjC,IAAKqE,EAAMxH,QAAS,GAAI6H,MAAOL,EAAMxH,QAAS,GAAI8H,WAEnD,CAEN,IAAIC,EAAI,IAAQP,EAAMxH,QAAS,GAAI6H,MAAQL,EAAMxH,QAAS,GAAI6H,OAC1DG,EAAI,IAAQR,EAAMxH,QAAS,GAAI8H,MAAQN,EAAMxH,QAAS,GAAI8H,OAE9D1C,EAAOjC,IAAK4E,EAAGC,GAIhB3C,EAASkD,WAAYnD,EAAQD,GAAWjC,eAAgB9B,EAAMjC,UAE9DiH,EAAKf,EAAS0C,EAAG1C,EAAS2C,GAE1B7C,EAAS9D,KAAM+D,GAIhB,SAASqD,EAAsBjB,GAE9B,IAAIW,EAAKX,EAAMxH,QAAS,GAAI6H,MAAQL,EAAMxH,QAAS,GAAI6H,MACnDO,EAAKZ,EAAMxH,QAAS,GAAI8H,MAAQN,EAAMxH,QAAS,GAAI8H,MAEnD/B,EAAWnL,KAAKyN,KAAMF,EAAKA,EAAKC,EAAKA,GAEzC7C,EAASpC,IAAK,EAAG4C,GAEjBP,EAAWrC,IAAK,EAAGvI,KAAK8K,IAAKH,EAASyC,EAAI1C,EAAW0C,EAAG5G,EAAMrC,YAE9DqI,EAAU5B,EAAWwC,GAErB1C,EAAWjE,KAAMkE,GA8BlB,SAAS3B,EAAe4D,GAEvB,IAAuB,IAAlBpG,EAAMpD,QAEX,OAASwJ,EAAMkB,aAEd,IAAK,QACL,IAAK,OA0CP,SAAsBlB,GAUrB,IAAImB,EAEJ,OATAnB,EAAMoB,iBAKNxH,EAAM9D,WAAWuL,MAAQzH,EAAM9D,WAAWuL,QAAU9N,OAAO8N,QAIlDrB,EAAMsB,QAEd,KAAK,EAEJH,EAAcvH,EAAMvB,aAAaJ,KACjC,MAED,KAAK,EAEJkJ,EAAcvH,EAAMvB,aAAaE,OACjC,MAED,KAAK,EAEJ4I,EAAcvH,EAAMvB,aAAaF,MACjC,MAED,QAECgJ,GAAgB,EAIlB,OAASA,GAER,KAAK7I,YAEJ,IAA0B,IAArBsB,EAAMtC,WAAuB,QAlXrC,SAA+B0I,GAE9BlC,EAAWnC,IAAKqE,EAAMC,QAASD,EAAME,SAkXnCqB,CAAsBvB,GAEtB7F,EAAQC,EAAM4C,MAEd,MAED,KAAK1E,aAEJ,GAAK0H,EAAMwB,SAAWxB,EAAMyB,SAAWzB,EAAM0B,SAAW,CAEvD,IAAyB,IAApB9H,EAAMlC,UAAsB,OAEjCyI,EAAoBH,GAEpB7F,EAAQC,EAAM6C,QAER,CAEN,IAA4B,IAAvBrD,EAAMpC,aAAyB,OAEpCuI,EAAuBC,GAEvB7F,EAAQC,EAAM2C,OAIf,MAED,KAAKzE,UAEJ,GAAK0H,EAAMwB,SAAWxB,EAAMyB,SAAWzB,EAAM0B,SAAW,CAEvD,IAA4B,IAAvB9H,EAAMpC,aAAyB,OAEpCuI,EAAuBC,GAEvB7F,EAAQC,EAAM2C,WAER,CAEN,IAAyB,IAApBnD,EAAMlC,UAAsB,OAEjCyI,EAAoBH,GAEpB7F,EAAQC,EAAM6C,IAIf,MAED,QAEC9C,EAAQC,EAAMC,KAIXF,IAAUC,EAAMC,OAEpBT,EAAM9D,WAAW2G,cAAchD,iBAAkB,cAAeiD,GAChE9C,EAAM9D,WAAW2G,cAAchD,iBAAkB,YAAakD,GAE9D/C,EAAMI,cAAe6C,IA/IpB8E,CAAa3B,IAShB,SAAStD,EAAesD,GAEvB,IAAuB,IAAlBpG,EAAMpD,QAEX,OAASwJ,EAAMkB,aAEd,IAAK,QACL,IAAK,OAqIP,SAAsBlB,GAErB,IAAuB,IAAlBpG,EAAMpD,QAAoB,OAI/B,OAFAwJ,EAAMoB,iBAEGjH,GAER,KAAKC,EAAM2C,OAEV,IAA4B,IAAvBnD,EAAMpC,aAAyB,QArbvC,SAAgCwI,GAE/BvC,EAAU9B,IAAKqE,EAAMC,QAASD,EAAME,SAEpCxC,EAAYqD,WAAYtD,EAAWF,GAAc7B,eAAgB9B,EAAMnC,aAEvE,IAAIlD,EAAUqF,EAAM9D,WAEpB+E,EAAY,EAAIzH,KAAKC,GAAKqK,EAAY6C,EAAIhM,EAAQ6K,cAElDhB,EAAU,EAAIhL,KAAKC,GAAKqK,EAAY8C,EAAIjM,EAAQ6K,cAEhD7B,EAAY1D,KAAM4D,GAElB7D,EAAMM,SAyaJ0H,CAAuB5B,GAEvB,MAED,KAAK5F,EAAM4C,MAEV,IAA0B,IAArBpD,EAAMtC,WAAuB,QA3arC,SAA+B0I,GAE9BjC,EAASpC,IAAKqE,EAAMC,QAASD,EAAME,SAEnClC,EAAW+C,WAAYhD,EAAUD,GAE5BE,EAAWwC,EAAI,EAEnBZ,EAAU3B,KAECD,EAAWwC,EAAI,GAE1BV,EAAS7B,KAIVH,EAAWjE,KAAMkE,GAEjBnE,EAAMM,SA2ZJ2H,CAAsB7B,GAEtB,MAED,KAAK5F,EAAM6C,IAEV,IAAyB,IAApBrD,EAAMlC,UAAsB,QA7ZpC,SAA6BsI,GAE5BpC,EAAOjC,IAAKqE,EAAMC,QAASD,EAAME,SAEjCrC,EAASkD,WAAYnD,EAAQD,GAAWjC,eAAgB9B,EAAMjC,UAE9DiH,EAAKf,EAAS0C,EAAG1C,EAAS2C,GAE1B7C,EAAS9D,KAAM+D,GAEfhE,EAAMM,SAqZJ4H,CAAoB9B,IAhKpB+B,CAAa/B,IAShB,SAASrD,EAAaqD,GAErB,OAASA,EAAMkB,aAEd,IAAK,QACL,IAAK,OA0JP,SAAoBlB,GAKnB,GAHApG,EAAM9D,WAAW2G,cAAcP,oBAAqB,cAAeQ,GACnE9C,EAAM9D,WAAW2G,cAAcP,oBAAqB,YAAaS,IAE1C,IAAlB/C,EAAMpD,QAAoB,OAI/BoD,EAAMI,cAAe8C,GAErB3C,EAAQC,EAAMC,KApKZ2H,IAwKH,SAAS3F,EAAc2D,IAEC,IAAlBpG,EAAMpD,UAA0C,IAArBoD,EAAMtC,YAA0B6C,IAAUC,EAAMC,MAAQF,IAAUC,EAAM2C,SAExGiD,EAAMoB,iBACNpB,EAAMiC,kBAENrI,EAAMI,cAAe6C,GAzatB,SAA2BmD,GAErBA,EAAMlB,OAAS,EAEnBgB,EAAS7B,KAEE+B,EAAMlB,OAAS,GAE1Bc,EAAU3B,KAIXrE,EAAMM,SA+ZNgI,CAAkBlC,GAElBpG,EAAMI,cAAe8C,IAItB,SAASpD,EAAWsG,IAEI,IAAlBpG,EAAMpD,UAAyC,IAApBoD,EAAMlC,WAnavC,SAAwBsI,GAEvB,IAAImC,GAAc,EAElB,OAASnC,EAAMoC,SAEd,KAAKxI,EAAM5B,KAAKE,GACf0G,EAAK,EAAGhF,EAAM/B,aACdsK,GAAc,EACd,MAED,KAAKvI,EAAM5B,KAAKI,OACfwG,EAAK,GAAKhF,EAAM/B,aAChBsK,GAAc,EACd,MAED,KAAKvI,EAAM5B,KAAKC,KACf2G,EAAKhF,EAAM/B,YAAa,GACxBsK,GAAc,EACd,MAED,KAAKvI,EAAM5B,KAAKG,MACfyG,GAAOhF,EAAM/B,YAAa,GAC1BsK,GAAc,EAKXA,IAGJnC,EAAMoB,iBAENxH,EAAMM,UAoYPmI,CAAerC,GAIhB,SAAS1D,EAAc0D,GAEtB,IAAuB,IAAlBpG,EAAMpD,QAAX,CAIA,OAFAwJ,EAAMoB,iBAEGpB,EAAMxH,QAAQyG,QAEtB,KAAK,EAEJ,OAASrF,EAAMpB,QAAQC,KAEtB,KAAKC,aAEJ,IAA4B,IAAvBkB,EAAMpC,aAAyB,OAEpC4I,EAAwBJ,GAExB7F,EAAQC,EAAM8C,aAEd,MAED,KAAKxE,UAEJ,IAAyB,IAApBkB,EAAMlC,UAAsB,OAEjC+I,EAAqBT,GAErB7F,EAAQC,EAAM+C,UAEd,MAED,QAEChD,EAAQC,EAAMC,KAIhB,MAED,KAAK,EAEJ,OAAST,EAAMpB,QAAQG,KAEtB,KAAKD,gBAEJ,IAA0B,IAArBkB,EAAMtC,aAA4C,IAApBsC,EAAMlC,UAAsB,QAlYpE,SAAmCsI,GAE7BpG,EAAMtC,YAAaoJ,EAAuBV,GAE1CpG,EAAMlC,WAAY+I,EAAqBT,GAgYxCsC,CAA0BtC,GAE1B7F,EAAQC,EAAMgD,gBAEd,MAED,KAAK1E,mBAEJ,IAA0B,IAArBkB,EAAMtC,aAA+C,IAAvBsC,EAAMpC,aAAyB,QApYvE,SAAsCwI,GAEhCpG,EAAMtC,YAAaoJ,EAAuBV,GAE1CpG,EAAMpC,cAAe4I,EAAwBJ,GAkY9CuC,CAA6BvC,GAE7B7F,EAAQC,EAAMiD,mBAEd,MAED,QAEClD,EAAQC,EAAMC,KAIhB,MAED,QAECF,EAAQC,EAAMC,KAIXF,IAAUC,EAAMC,MAEpBT,EAAMI,cAAe6C,IAMvB,SAASL,EAAawD,GAErB,IAAuB,IAAlBpG,EAAMpD,QAKX,OAHAwJ,EAAMoB,iBACNpB,EAAMiC,kBAEG9H,GAER,KAAKC,EAAM8C,aAEV,IAA4B,IAAvBtD,EAAMpC,aAAyB,OAEpCsJ,EAAuBd,GAEvBpG,EAAMM,SAEN,MAED,KAAKE,EAAM+C,UAEV,IAAyB,IAApBvD,EAAMlC,UAAsB,OAEjCsJ,EAAoBhB,GAEpBpG,EAAMM,SAEN,MAED,KAAKE,EAAMgD,gBAEV,IAA0B,IAArBxD,EAAMtC,aAA4C,IAApBsC,EAAMlC,UAAsB,QAtXlE,SAAkCsI,GAE5BpG,EAAMtC,YAAa2J,EAAsBjB,GAEzCpG,EAAMlC,WAAYsJ,EAAoBhB,GAoXzCwC,CAAyBxC,GAEzBpG,EAAMM,SAEN,MAED,KAAKE,EAAMiD,mBAEV,IAA0B,IAArBzD,EAAMtC,aAA+C,IAAvBsC,EAAMpC,aAAyB,QAxXrE,SAAqCwI,GAE/BpG,EAAMtC,YAAa2J,EAAsBjB,GAEzCpG,EAAMpC,cAAesJ,EAAuBd,GAsX/CyC,CAA4BzC,GAE5BpG,EAAMM,SAEN,MAED,QAECC,EAAQC,EAAMC,MAMjB,SAASkC,GAAYyD,IAEG,IAAlBpG,EAAMpD,UAIXoD,EAAMI,cAAe8C,GAErB3C,EAAQC,EAAMC,MAIf,SAAS8B,GAAe6D,IAEA,IAAlBpG,EAAMpD,SAEXwJ,EAAMoB,iBAMPxH,EAAM9D,WAAW2D,iBAAkB,cAAe0C,IAElDvC,EAAM9D,WAAW2D,iBAAkB,cAAe2C,GAClDxC,EAAM9D,WAAW2D,iBAAkB,QAAS4C,GAE5CzC,EAAM9D,WAAW2D,iBAAkB,aAAc6C,GACjD1C,EAAM9D,WAAW2D,iBAAkB,WAAY8C,IAC/C3C,EAAM9D,WAAW2D,iBAAkB,YAAa+C,GAIhDrH,KAAK+E,WAINtE,EAAc8M,UAAYC,OAAOC,OAAQC,kBACjBC,YAAclN,EAWtC,IAAImN,EAAc,SAAWlN,EAAQC,GAEpCF,EAAcoN,KAAM7N,KAAMU,EAAQC,GAElCX,KAAKyC,oBAAqB,EAE1BzC,KAAKkD,aAAaJ,KAAOK,UACzBnD,KAAKkD,aAAaF,MAAQG,aAE1BnD,KAAKqD,QAAQC,IAAMC,UACnBvD,KAAKqD,QAAQG,IAAMD,qBAIpBqK,EAAYL,UAAYC,OAAOC,OAAQC,kBACjBC,YAAcC,EC1rCpC,IAAIE,EAAc,WAGjB,IAAIC,EAAiB,gBAEjBC,EAA2B,WAE3BC,EAAuB,WAEvBC,EAAkB,WAElBC,EAAK,IAAI5M,MACT6M,EAAK,IAAI7M,MACT8M,EAAK,IAAI9M,MAET+M,EAAK,IAAI/M,MACTgN,EAAK,IAAIhN,MAEb,SAASiN,IAER,IAAIxJ,EAAQ,CACXyJ,QAAS,GACT/N,OAAQ,GAERgO,SAAU,GACVC,QAAS,GACTC,OAAQ,GACRC,IAAK,GAELC,UAAW,GACXC,kBAAmB,GAEnBC,YAAa,SAAWC,EAAMC,GAI7B,GAAKlP,KAAKU,SAA0C,IAAhCV,KAAKU,OAAOwO,gBAI/B,OAFAlP,KAAKU,OAAOuO,KAAOA,OACnBjP,KAAKU,OAAOwO,iBAAwC,IAApBA,GAKjC,IAAIC,EAAqBnP,KAAKU,QAAiD,mBAAhCV,KAAKU,OAAO0O,gBAAiCpP,KAAKU,OAAO0O,uBAAoB9O,EA+H5H,GA7HKN,KAAKU,QAA2C,mBAA1BV,KAAKU,OAAO2O,WAEtCrP,KAAKU,OAAO2O,WAAW,GAIxBrP,KAAKU,OAAS,CACbuO,KAAMA,GAAQ,GACdC,iBAAuC,IAApBA,EAEnBI,SAAU,CACTZ,SAAU,GACVC,QAAS,GACTC,OAAQ,GACRC,IAAK,GACLU,cAAc,GAEfT,UAAW,GACXU,QAAQ,EAERC,cAAe,SAAWR,EAAMS,GAE/B,IAAIC,EAAW3P,KAAKqP,WAAW,GAI1BM,IAAcA,EAASC,WAAaD,EAASE,YAAc,IAE/D7P,KAAK8O,UAAUgB,OAAQH,EAASI,MAAO,GAIxC,IAAIC,EAAW,CACdD,MAAO/P,KAAK8O,UAAUhF,OACtBmF,KAAMA,GAAQ,GACdgB,OAAUC,MAAMC,QAAST,IAAeA,EAAU5F,OAAS,EAAI4F,EAAWA,EAAU5F,OAAS,GAAM,GACnG0F,YAAuBlP,IAAbqP,EAAyBA,EAASH,OAASxP,KAAKwP,OAC1DY,gBAA2B9P,IAAbqP,EAAyBA,EAASU,SAAW,EAC3DA,UAAY,EACZR,YAAc,EACdD,WAAW,EAEXlM,MAAO,SAAWqM,GAEjB,IAAIO,EAAS,CACZP,MAA0B,iBAAVA,EAAqBA,EAAQ/P,KAAK+P,MAClDd,KAAMjP,KAAKiP,KACXgB,OAAQjQ,KAAKiQ,OACbT,OAAQxP,KAAKwP,OACbY,WAAY,EACZC,UAAY,EACZR,YAAc,EACdD,WAAW,GAGZ,OADAU,EAAO5M,MAAQ1D,KAAK0D,MAAM6M,KAAMD,GACzBA,IAOT,OAFAtQ,KAAK8O,UAAU0B,KAAMR,GAEdA,GAIRZ,gBAAiB,WAEhB,GAAKpP,KAAK8O,UAAUhF,OAAS,EAE5B,OAAO9J,KAAK8O,UAAW9O,KAAK8O,UAAUhF,OAAS,IAQjDuF,UAAW,SAAWoB,GAErB,IAAIC,EAAoB1Q,KAAKoP,kBAU7B,GATKsB,IAAsD,IAAjCA,EAAkBL,WAE3CK,EAAkBL,SAAWrQ,KAAKsP,SAASZ,SAAS5E,OAAS,EAC7D4G,EAAkBb,WAAaa,EAAkBL,SAAWK,EAAkBN,WAC9EM,EAAkBd,WAAY,GAK1Ba,GAAOzQ,KAAK8O,UAAUhF,OAAS,EAEnC,IAAM,IAAI6G,EAAK3Q,KAAK8O,UAAUhF,OAAS,EAAG6G,GAAM,EAAGA,IAE7C3Q,KAAK8O,UAAW6B,GAAKd,YAAc,GAEvC7P,KAAK8O,UAAUgB,OAAQa,EAAI,GAkB9B,OATKF,GAAiC,IAA1BzQ,KAAK8O,UAAUhF,QAE1B9J,KAAK8O,UAAU0B,KAAM,CACpBvB,KAAM,GACNO,OAAQxP,KAAKwP,SAKRkB,IAWJvB,GAAoBA,EAAiBF,MAA0C,mBAA3BE,EAAiBzL,MAAuB,CAEhG,IAAIkN,EAAWzB,EAAiBzL,MAAO,GACvCkN,EAAShB,WAAY,EACrB5P,KAAKU,OAAOoO,UAAU0B,KAAMI,GAI7B5Q,KAAKyO,QAAQ+B,KAAMxQ,KAAKU,SAIzBmQ,SAAU,WAEJ7Q,KAAKU,QAA2C,mBAA1BV,KAAKU,OAAO2O,WAEtCrP,KAAKU,OAAO2O,WAAW,IAMzByB,iBAAkB,SAAWC,EAAOC,GAEnC,IAAIjB,EAAQkB,SAAUF,EAAO,IAC7B,OAAsD,GAA7ChB,GAAS,EAAIA,EAAQ,EAAIA,EAAQiB,EAAM,IAIjDE,iBAAkB,SAAWH,EAAOC,GAEnC,IAAIjB,EAAQkB,SAAUF,EAAO,IAC7B,OAAsD,GAA7ChB,GAAS,EAAIA,EAAQ,EAAIA,EAAQiB,EAAM,IAIjDG,aAAc,SAAWJ,EAAOC,GAE/B,IAAIjB,EAAQkB,SAAUF,EAAO,IAC7B,OAAsD,GAA7ChB,GAAS,EAAIA,EAAQ,EAAIA,EAAQiB,EAAM,IAIjDI,UAAW,SAAWC,EAAGC,EAAGC,GAE3B,IAAIC,EAAMxR,KAAK0O,SACX+C,EAAMzR,KAAKU,OAAO4O,SAASZ,SAE/B+C,EAAIjB,KAAMgB,EAAKH,EAAI,GAAKG,EAAKH,EAAI,GAAKG,EAAKH,EAAI,IAC/CI,EAAIjB,KAAMgB,EAAKF,EAAI,GAAKE,EAAKF,EAAI,GAAKE,EAAKF,EAAI,IAC/CG,EAAIjB,KAAMgB,EAAKD,EAAI,GAAKC,EAAKD,EAAI,GAAKC,EAAKD,EAAI,KAIhDG,eAAgB,SAAWL,GAE1B,IAAIG,EAAMxR,KAAK0O,SACL1O,KAAKU,OAAO4O,SAASZ,SAE3B8B,KAAMgB,EAAKH,EAAI,GAAKG,EAAKH,EAAI,GAAKG,EAAKH,EAAI,KAIhDM,cAAe,SAAWN,GAEzB,IAAIG,EAAMxR,KAAK0O,SACL1O,KAAKU,OAAO4O,SAASZ,SAE3B8B,KAAMgB,EAAKH,EAAI,GAAKG,EAAKH,EAAI,GAAKG,EAAKH,EAAI,KAIhDO,UAAW,SAAWP,EAAGC,EAAGC,GAE3B,IAAIC,EAAMxR,KAAK2O,QACX8C,EAAMzR,KAAKU,OAAO4O,SAASX,QAE/B8C,EAAIjB,KAAMgB,EAAKH,EAAI,GAAKG,EAAKH,EAAI,GAAKG,EAAKH,EAAI,IAC/CI,EAAIjB,KAAMgB,EAAKF,EAAI,GAAKE,EAAKF,EAAI,GAAKE,EAAKF,EAAI,IAC/CG,EAAIjB,KAAMgB,EAAKD,EAAI,GAAKC,EAAKD,EAAI,GAAKC,EAAKD,EAAI,KAIhDM,cAAe,SAAWR,EAAGC,EAAGC,GAE/B,IAAIC,EAAMxR,KAAK0O,SACX+C,EAAMzR,KAAKU,OAAO4O,SAASX,QAE/BR,EAAG2D,UAAWN,EAAKH,GACnBjD,EAAG0D,UAAWN,EAAKF,GACnBjD,EAAGyD,UAAWN,EAAKD,GAEnBhD,EAAG3C,WAAYyC,EAAID,GACnBE,EAAG1C,WAAYuC,EAAIC,GACnBG,EAAGwD,MAAOzD,GAEVC,EAAGyD,YAEHP,EAAIjB,KAAMjC,EAAGnD,EAAGmD,EAAGlD,EAAGkD,EAAG0D,GACzBR,EAAIjB,KAAMjC,EAAGnD,EAAGmD,EAAGlD,EAAGkD,EAAG0D,GACzBR,EAAIjB,KAAMjC,EAAGnD,EAAGmD,EAAGlD,EAAGkD,EAAG0D,IAI1BC,SAAU,SAAWb,EAAGC,EAAGC,GAE1B,IAAIC,EAAMxR,KAAK4O,OACX6C,EAAMzR,KAAKU,OAAO4O,SAASV,YAEbtO,IAAbkR,EAAKH,IAAoBI,EAAIjB,KAAMgB,EAAKH,EAAI,GAAKG,EAAKH,EAAI,GAAKG,EAAKH,EAAI,SAC3D/Q,IAAbkR,EAAKF,IAAoBG,EAAIjB,KAAMgB,EAAKF,EAAI,GAAKE,EAAKF,EAAI,GAAKE,EAAKF,EAAI,SAC3DhR,IAAbkR,EAAKD,IAAoBE,EAAIjB,KAAMgB,EAAKD,EAAI,GAAKC,EAAKD,EAAI,GAAKC,EAAKD,EAAI,KAI9EY,MAAO,SAAWd,EAAGC,EAAGC,GAEvB,IAAIC,EAAMxR,KAAK6O,IACX4C,EAAMzR,KAAKU,OAAO4O,SAAST,IAE/B4C,EAAIjB,KAAMgB,EAAKH,EAAI,GAAKG,EAAKH,EAAI,IACjCI,EAAIjB,KAAMgB,EAAKF,EAAI,GAAKE,EAAKF,EAAI,IACjCG,EAAIjB,KAAMgB,EAAKD,EAAI,GAAKC,EAAKD,EAAI,KAIlCa,aAAc,WAEb,IAAIX,EAAMzR,KAAKU,OAAO4O,SAAST,IAE/B4C,EAAIjB,KAAM,EAAG,GACbiB,EAAIjB,KAAM,EAAG,GACbiB,EAAIjB,KAAM,EAAG,IAId6B,UAAW,SAAWhB,GAErB,IAAIG,EAAMxR,KAAK6O,IACL7O,KAAKU,OAAO4O,SAAST,IAE3B2B,KAAMgB,EAAKH,EAAI,GAAKG,EAAKH,EAAI,KAIlCiB,QAAS,SAAWjB,EAAGC,EAAGC,EAAGgB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAEhD,IAAIC,EAAO7S,KAAK0O,SAAS5E,OAErBgJ,EAAK9S,KAAK8Q,iBAAkBO,EAAGwB,GAC/BE,EAAK/S,KAAK8Q,iBAAkBQ,EAAGuB,GAC/BG,EAAKhT,KAAK8Q,iBAAkBS,EAAGsB,GAOnC,GALA7S,KAAKoR,UAAW0B,EAAIC,EAAIC,GACxBhT,KAAKkS,SAAUY,EAAIC,EAAIC,QAIX1S,IAAPoS,GAA2B,KAAPA,EAAY,CAEpC,IAAIO,EAAOjT,KAAK2O,QAAQ7E,OAExBgJ,EAAK9S,KAAKkR,iBAAkBwB,EAAIO,GAChCF,EAAK/S,KAAKkR,iBAAkByB,EAAIM,GAChCD,EAAKhT,KAAKkR,iBAAkB0B,EAAIK,GAEhCjT,KAAK4R,UAAWkB,EAAIC,EAAIC,QAIxBhT,KAAK6R,cAAeiB,EAAIC,EAAIC,GAM7B,QAAY1S,IAAPiS,GAA2B,KAAPA,EAAY,CAEpC,IAAIW,EAAQlT,KAAK6O,IAAI/E,OAErBgJ,EAAK9S,KAAKmR,aAAcoB,EAAIW,GAC5BH,EAAK/S,KAAKmR,aAAcqB,EAAIU,GAC5BF,EAAKhT,KAAKmR,aAAcsB,EAAIS,GAE5BlT,KAAKmS,MAAOW,EAAIC,EAAIC,GAEpBhT,KAAKU,OAAO4O,SAASC,cAAe,OAMpCvP,KAAKoS,gBAMPe,iBAAkB,SAAWzE,GAE5B1O,KAAKU,OAAO4O,SAAS7H,KAAO,SAI5B,IAFA,IAAIoL,EAAO7S,KAAK0O,SAAS5E,OAEfsJ,EAAK,EAAGC,EAAI3E,EAAS5E,OAAQsJ,EAAKC,EAAGD,IAAQ,CAEtD,IAAIrD,EAAQ/P,KAAK8Q,iBAAkBpC,EAAU0E,GAAMP,GAEnD7S,KAAK0R,eAAgB3B,GACrB/P,KAAKkS,SAAUnC,KAMjBuD,gBAAiB,SAAW5E,EAAUG,GAErC7O,KAAKU,OAAO4O,SAAS7H,KAAO,OAK5B,IAHA,IAAIoL,EAAO7S,KAAK0O,SAAS5E,OACrBoJ,EAAQlT,KAAK6O,IAAI/E,OAEXsJ,EAAK,EAAGC,EAAI3E,EAAS5E,OAAQsJ,EAAKC,EAAGD,IAE9CpT,KAAK2R,cAAe3R,KAAK8Q,iBAAkBpC,EAAU0E,GAAMP,IAItD,IAAIU,EAAM,EAAhB,IAAmBF,EAAIxE,EAAI/E,OAAQyJ,EAAMF,EAAGE,IAE3CvT,KAAKqS,UAAWrS,KAAKmR,aAActC,EAAK0E,GAAOL,MAUlD,OAFAlO,EAAMgK,YAAa,IAAI,GAEhBhK,EAMR,SAAS8I,EAAW0F,GAEnBC,WAAazT,KAAMwT,GAEnBxT,KAAK8O,UAAY,KA4dlB,OAxdAhB,EAAUP,UAAYC,OAAOkG,OAAQlG,OAAOC,OAAQgG,iBAAoB,CAEvE9F,YAAaG,EAEb6F,KAAM,SAAWC,EAAKC,EAAQC,EAAYC,GAEzC,IAAItP,EAAQzE,KAERgU,EAAS,IAAIC,MAAYjU,KAAKwT,SAClCQ,EAAOE,QAASlU,KAAKmU,MACrBH,EAAOI,iBAAkBpU,KAAKqU,eAC9BL,EAAOM,mBAAoBtU,KAAKuU,iBAChCP,EAAOL,KAAMC,GAAK,SAAWY,GAE5B,IAECX,EAAQpP,EAAMgQ,MAAOD,IAEpB,MAAQ7V,GAEJoV,EAEJA,EAASpV,GAITuC,QAAQE,MAAOzC,GAIhB8F,EAAM+O,QAAQkB,UAAWd,MAIxBE,EAAYC,IAIhBY,aAAc,SAAW7F,GAIxB,OAFA9O,KAAK8O,UAAYA,EAEV9O,MAIRyU,MAAO,SAAWD,GAEjB,IAAIxP,EAAQ,IAAIwJ,GAEkB,IAA7BgG,EAAKI,QAAS,UAGlBJ,EAAOA,EAAKK,QAAS,QAAS,QAIG,IAA7BL,EAAKI,QAAS,UAGlBJ,EAAOA,EAAKK,QAAS,QAAS,KAY/B,IARA,IAAIC,EAAQN,EAAKO,MAAO,MACpBC,EAAO,GAAIC,EAAgB,GAE3BC,EAAS,GAGTC,EAAoC,kBAAhB,GAAGA,SAEjBC,EAAI,EAAG/B,EAAIyB,EAAMhL,OAAQsL,EAAI/B,EAAG+B,IAQzC,GANAJ,EAAOF,EAAOM,GAMM,KAJpBJ,EAAOG,EAAWH,EAAKG,WAAaH,EAAKK,QAEvBvL,QAOK,OAHvBmL,EAAgBD,EAAKM,OAAQ,IAK7B,GAAuB,MAAlBL,EAAwB,CAE5B,IAAIM,EAAOP,EAAKD,MAAO,OAEvB,OAASQ,EAAM,IAEd,IAAK,IACJvQ,EAAM0J,SAAS8B,KACdgF,WAAYD,EAAM,IAClBC,WAAYD,EAAM,IAClBC,WAAYD,EAAM,KAEdA,EAAKzL,QAAU,EAEnB9E,EAAM4J,OAAO4B,KACZgF,WAAYD,EAAM,IAClBC,WAAYD,EAAM,IAClBC,WAAYD,EAAM,KAQnBvQ,EAAM4J,OAAO4B,UAAMlQ,OAAWA,OAAWA,GAI1C,MACD,IAAK,KACJ0E,EAAM2J,QAAQ6B,KACbgF,WAAYD,EAAM,IAClBC,WAAYD,EAAM,IAClBC,WAAYD,EAAM,KAEnB,MACD,IAAK,KACJvQ,EAAM6J,IAAI2B,KACTgF,WAAYD,EAAM,IAClBC,WAAYD,EAAM,WAMf,GAAuB,MAAlBN,EAAwB,CAQnC,IANA,IACIQ,EADWT,EAAKU,OAAQ,GAAIL,OACNN,MAAO,OAC7BY,EAAe,GAITC,EAAI,EAAGC,EAAKJ,EAAW3L,OAAQ8L,EAAIC,EAAID,IAAO,CAEvD,IAAIE,EAASL,EAAYG,GAEzB,GAAKE,EAAOhM,OAAS,EAAI,CAExB,IAAIiM,EAAcD,EAAOf,MAAO,KAChCY,EAAanF,KAAMuF,IAQrB,IAAIC,EAAKL,EAAc,GAEvB,IAAUC,EAAI,EAAGC,EAAKF,EAAa7L,OAAS,EAAG8L,EAAIC,EAAID,IAAO,CAE7D,IAAIK,EAAKN,EAAcC,GACnBM,EAAKP,EAAcC,EAAI,GAE3B5Q,EAAMsN,QACL0D,EAAI,GAAKC,EAAI,GAAKC,EAAI,GACtBF,EAAI,GAAKC,EAAI,GAAKC,EAAI,GACtBF,EAAI,GAAKC,EAAI,GAAKC,EAAI,UAKlB,GAAuB,MAAlBjB,EAAwB,CAEnC,IAAIkB,EAAYnB,EAAKoB,UAAW,GAAIf,OAAON,MAAO,KAC9CsB,EAAe,GAAIC,EAAU,GAEjC,IAA+B,IAA1BtB,EAAKJ,QAAS,KAElByB,EAAeF,OAIf,IAAM,IAAII,EAAK,EAAGC,EAAOL,EAAUrM,OAAQyM,EAAKC,EAAMD,IAAQ,CAE7D,IAAIE,EAAQN,EAAWI,GAAKxB,MAAO,KAEf,KAAf0B,EAAO,IAAaJ,EAAa7F,KAAMiG,EAAO,IAC/B,KAAfA,EAAO,IAAaH,EAAQ9F,KAAMiG,EAAO,IAMhDzR,EAAMsO,gBAAiB+C,EAAcC,QAE/B,GAAuB,MAAlBrB,EAAwB,CAEnC,IACIyB,EADW1B,EAAKU,OAAQ,GAAIL,OACPN,MAAO,KAEhC/P,EAAMmO,iBAAkBuD,QAElB,GAAkD,QAA3CxB,EAASnH,EAAe4I,KAAM3B,IAAoB,CAQ/D,IAAI/F,GAAS,IAAMiG,EAAQ,GAAIQ,OAAQ,GAAIL,QAASK,OAAQ,GAE5D1Q,EAAMgK,YAAaC,QAEb,GAAKhB,EAAqB2I,KAAM5B,GAItChQ,EAAMtE,OAAO+O,cAAeuF,EAAKoB,UAAW,GAAIf,OAAQrQ,EAAM+J,wBAExD,GAAKf,EAAyB4I,KAAM5B,GAI1ChQ,EAAM+J,kBAAkByB,KAAMwE,EAAKoB,UAAW,GAAIf,aAE5C,GAAKnH,EAAgB0I,KAAM5B,GAKjC9T,QAAQC,KAAM,6GAER,GAAuB,MAAlB8T,EAAwB,CAwBnC,IAtBAC,EAASF,EAAKD,MAAO,MAsBTjL,OAAS,EAAI,CAExB,IAAIiH,EAAQmE,EAAQ,GAAIG,OAAOwB,cAC/B7R,EAAMtE,OAAO8O,OAAqB,MAAVuB,GAA2B,QAAVA,OAKzC/L,EAAMtE,OAAO8O,QAAS,GAInBQ,EAAWhL,EAAMtE,OAAO0O,qBACZY,EAASR,OAASxK,EAAMtE,OAAO8O,YAEzC,CAGN,GAAc,OAATwF,EAAgB,SAErB9T,QAAQC,KAAM,sCAAwC6T,EAAO,KAM/DhQ,EAAM6L,WAEN,IAAIiG,EAAY,IAAIC,MAKpB,GAJAD,EAAU/H,kBAAoB,GAAGiI,OAAQhS,EAAM+J,oBAIxB,MAF0B,IAAzB/J,EAAMyJ,QAAQ3E,QAAgE,IAAhD9E,EAAMyJ,QAAS,GAAIa,SAASZ,SAAS5E,QAI1F,IAAUsL,EAAI,EAAG/B,EAAIrO,EAAMyJ,QAAQ3E,OAAQsL,EAAI/B,EAAG+B,IAAO,CAExD,IAAI1U,EAASsE,EAAMyJ,QAAS2G,GACxB9F,EAAW5O,EAAO4O,SAClBR,EAAYpO,EAAOoO,UACnBmI,EAA6B,SAAlB3H,EAAS7H,KACpByP,EAA+B,WAAlB5H,EAAS7H,KACtB0P,GAAkB,EAGtB,GAAkC,IAA7B7H,EAASZ,SAAS5E,OAAvB,EAEIsN,EAAiB,IAAIC,OAEVC,aAAc,WAAY,IAAIC,MAAwBjI,EAASZ,SAAU,IAEnFY,EAASX,QAAQ7E,OAAS,GAE9BsN,EAAeE,aAAc,SAAU,IAAIC,MAAwBjI,EAASX,QAAS,IAIjFW,EAASV,OAAO9E,OAAS,IAE7BqN,GAAkB,EAClBC,EAAeE,aAAc,QAAS,IAAIC,MAAwBjI,EAASV,OAAQ,MAIrD,IAA1BU,EAASC,cAEb6H,EAAeE,aAAc,KAAM,IAAIC,MAAwBjI,EAAST,IAAK,IAQ9E,IAFA,IA8DI2I,EA9DAC,EAAmB,GAEb9G,EAAK,EAAG+G,EAAQ5I,EAAUhF,OAAQ6G,EAAK+G,EAAO/G,IAAQ,CAE/D,IACIgH,GADAC,EAAiB9I,EAAW6B,IACE1B,KAAO,IAAM2I,EAAepI,OAAS,IAAM2H,EACzEnH,EAAWhL,EAAM8J,UAAW6I,GAEhC,GAAwB,OAAnB3X,KAAK8O,UAKT,GAHAkB,EAAWhQ,KAAK8O,UAAUrB,OAAQmK,EAAe3I,OAG5CgI,IAAUjH,GAAgBA,aAAoB6H,OAO5C,GAAKX,GAAYlH,KAAgBA,aAAoB8H,OAAmB,CAE9E,IAAIC,EAAiB,IAAID,MAAgB,CAAEE,KAAM,GAAIC,iBAAiB,IACtEC,0BAA8BH,EAAgB/H,GAC9C+H,EAAenY,MAAM8E,KAAMsL,EAASpQ,OACpCmY,EAAeI,IAAMnI,EAASmI,IAC9BnI,EAAW+H,OAb6D,CAExE,IAAIK,EAAe,IAAIP,MACvBK,0BAA8BE,EAAcpI,GAC5CoI,EAAaxY,MAAM8E,KAAMsL,EAASpQ,OAClCoQ,EAAWoI,OAcK9X,IAAb0P,KAIHA,EAFIiH,EAEO,IAAIY,MAEJX,EAEA,IAAIY,MAAgB,CAAEE,KAAM,EAAGC,iBAAiB,IAIhD,IAAII,OAIPpJ,KAAO2I,EAAe3I,KAC/Be,EAASsI,aAAcV,EAAepI,OACtCQ,EAASuI,aAAepB,EAExBnS,EAAM8J,UAAW6I,GAAiB3H,GAInCyH,EAAiBjH,KAAMR,GAQxB,GAAKyH,EAAiB3N,OAAS,EAAI,CAElC,IAAU6G,EAAK,EAAG+G,EAAQ5I,EAAUhF,OAAQ6G,EAAK+G,EAAO/G,IAAQ,CAE/D,IAAIiH,EAAiB9I,EAAW6B,GAChCyG,EAAeoB,SAAUZ,EAAexH,WAAYwH,EAAe/H,WAAYc,GAM/E6G,EAFIP,EAEG,IAAIwB,MAAcrB,EAAgBK,GAE9BP,EAEJ,IAAIwB,MAAQtB,EAAgBK,GAI5B,IAAIkB,MAAMvB,EAAgBK,QAQjCD,EAFIP,EAEG,IAAIwB,MAAcrB,EAAgBK,EAAkB,IAEhDP,EAEJ,IAAIwB,MAAQtB,EAAgBK,EAAkB,IAI9C,IAAIkB,MAAMvB,EAAgBK,EAAkB,IAMrDD,EAAKvI,KAAOvO,EAAOuO,KAEnB6H,EAAU1Q,IAAKoR,SAQhB,GAAKxS,EAAM0J,SAAS5E,OAAS,EAAI,CAEhC,IAEIsN,EAFApH,EAAW,IAAI8H,MAAgB,CAAEE,KAAM,EAAGC,iBAAiB,KAE3Db,EAAiB,IAAIC,OAEVC,aAAc,WAAY,IAAIC,MAAwBvS,EAAM0J,SAAU,IAEhF1J,EAAM4J,OAAO9E,OAAS,QAA2BxJ,IAAtB0E,EAAM4J,OAAQ,KAE7CwI,EAAeE,aAAc,QAAS,IAAIC,MAAwBvS,EAAM4J,OAAQ,IAChFoB,EAASuI,cAAe,GAIzB,IAAIK,EAAS,IAAIF,MAAQtB,EAAgBpH,GACzC8G,EAAU1Q,IAAKwS,GAMjB,OAAO9B,KAMFhJ,EAj4BU,GCCd+K,EAAY,SAAWrF,GAE1BC,WAAazT,KAAMwT,ICdpB,SAASsF,EAAGC,GACR,MAAsB,iBAAXA,GAAwBA,EAC5BA,EAAOhE,MAAM,KAAKiE,QAAO,SAACC,EAAKC,GAClC,I,MAAMC,EAAMD,EAAInE,MAAM,KACtB,OAAOvH,OAAOkG,Q,EAAP,G,EAAiByF,EAAI,G,EAAKA,EAAI,G,gGAAMF,KAC5C,IAJ+CF,EDiBtDF,EAAUtL,UAAYC,OAAOkG,OAAQlG,OAAOC,OAAQgG,iBAAoB,CAEvE9F,YAAakL,EAeblF,KAAM,SAAWC,EAAKC,EAAQC,EAAYC,GAEzC,IAAItP,EAAQzE,KAERmU,EAAuB,KAAdnU,KAAKmU,KAAgBiF,qBAA4BxF,GAAQ5T,KAAKmU,KAEvEH,EAAS,IAAIC,MAAYjU,KAAKwT,SAClCQ,EAAOE,QAASlU,KAAKmU,MACrBH,EAAOI,iBAAkBpU,KAAKqU,eAC9BL,EAAOM,mBAAoBtU,KAAKuU,iBAChCP,EAAOL,KAAMC,GAAK,SAAWY,GAE5B,IAECX,EAAQpP,EAAMgQ,MAAOD,EAAML,IAE1B,MAAQxV,GAEJoV,EAEJA,EAASpV,GAITuC,QAAQE,MAAOzC,GAIhB8F,EAAM+O,QAAQkB,UAAWd,MAIxBE,EAAYC,IAIhBsF,mBAAoB,SAAWtI,GAG9B,OADA/Q,KAAKsZ,gBAAkBvI,EAChB/Q,MAeRyU,MAAO,SAAWD,EAAML,GAOvB,IALA,IAAIW,EAAQN,EAAKO,MAAO,MACpBwE,EAAO,GACPC,EAAoB,MACpBC,EAAgB,GAEVrE,EAAI,EAAGA,EAAIN,EAAMhL,OAAQsL,IAAO,CAEzC,IAAIJ,EAAOF,EAAOM,GAGlB,GAAqB,KAFrBJ,EAAOA,EAAKK,QAEFvL,QAAqC,MAArBkL,EAAKM,OAAQ,GAAvC,CAOA,IAAIoE,EAAM1E,EAAKJ,QAAS,KAEpB+E,EAAQD,GAAO,EAAM1E,EAAKoB,UAAW,EAAGsD,GAAQ1E,EACpD2E,EAAMA,EAAI9C,cAEV,IAAI9F,EAAU2I,GAAO,EAAM1E,EAAKoB,UAAWsD,EAAM,GAAM,GAGvD,GAFA3I,EAAQA,EAAMsE,OAED,WAARsE,EAIJJ,EAAO,CAAEtK,KAAM8B,GACf0I,EAAe1I,GAAUwI,OAIzB,GAAa,OAARI,GAAwB,OAARA,GAAwB,OAARA,GAAwB,OAARA,EAAe,CAEnE,IAAIC,EAAK7I,EAAMgE,MAAOyE,EAAmB,GACzCD,EAAMI,GAAQ,CAAEnE,WAAYoE,EAAI,IAAOpE,WAAYoE,EAAI,IAAOpE,WAAYoE,EAAI,UAI9EL,EAAMI,GAAQ5I,GAQjB,IAAI8I,EAAkB,IAAIhB,EAAUiB,gBAAiB9Z,KAAK+Z,cAAgB5F,EAAMnU,KAAKsZ,iBAIrF,OAHAO,EAAgBG,eAAgBha,KAAKia,aACrCJ,EAAgBK,WAAYla,KAAKwT,SACjCqG,EAAgBlF,aAAc8E,GACvBI,MAqBThB,EAAUiB,gBAAkB,SAAWK,EAASC,GAE/Cpa,KAAKma,QAAUA,GAAW,GAC1Bna,KAAKoa,QAAUA,EACfpa,KAAKyZ,cAAgB,GACrBzZ,KAAK8O,UAAY,GACjB9O,KAAKqa,eAAiB,GACtBra,KAAKsa,WAAa,GAElBta,KAAKua,KAASva,KAAKoa,SAAWpa,KAAKoa,QAAQG,KAASva,KAAKoa,QAAQG,KAAOC,MACxExa,KAAKya,KAASza,KAAKoa,SAAWpa,KAAKoa,QAAQK,KAASza,KAAKoa,QAAQK,KAAOC,QAI/CnN,UAAY,CAErCI,YAAakL,EAAUiB,gBAEvBG,YAAa,YAEbD,eAAgB,SAAWjJ,GAG1B,OADA/Q,KAAKia,YAAclJ,EACZ/Q,MAIRka,WAAY,SAAWnJ,GAEtB/Q,KAAKwT,QAAUzC,GAIhB4D,aAAc,SAAW8E,GAExBzZ,KAAKyZ,cAAgBzZ,KAAK2a,QAASlB,GACnCzZ,KAAK8O,UAAY,GACjB9O,KAAKqa,eAAiB,GACtBra,KAAKsa,WAAa,IAInBK,QAAS,SAAWlB,GAEnB,IAAOzZ,KAAKoa,QAAU,OAAOX,EAE7B,IAAImB,EAAY,GAEhB,IAAM,IAAIC,KAAMpB,EAAgB,CAI/B,IAAIqB,EAAMrB,EAAeoB,GAErBE,EAAS,GAIb,IAAM,IAAIC,KAFVJ,EAAWC,GAAOE,EAEAD,EAAM,CAEvB,IAAIG,GAAO,EACPlK,EAAQ+J,EAAKE,GACbE,EAAQF,EAAKnE,cAEjB,OAASqE,GAER,IAAK,KACL,IAAK,KACL,IAAK,KAIClb,KAAKoa,SAAWpa,KAAKoa,QAAQe,eAEjCpK,EAAQ,CAAEA,EAAO,GAAM,IAAKA,EAAO,GAAM,IAAKA,EAAO,GAAM,MAIvD/Q,KAAKoa,SAAWpa,KAAKoa,QAAQgB,gBAEb,IAAfrK,EAAO,IAA4B,IAAfA,EAAO,IAA4B,IAAfA,EAAO,KAInDkK,GAAO,GAcNA,IAEJF,EAAQG,GAAUnK,IAQrB,OAAO6J,GAIRS,QAAS,WAER,IAAM,IAAIR,KAAM7a,KAAKyZ,cAEpBzZ,KAAKyN,OAAQoN,IAMfS,SAAU,SAAWC,GAEpB,OAAOvb,KAAKsa,WAAYiB,IAIzBC,WAAY,WAEX,IAAIzL,EAAQ,EAEZ,IAAM,IAAI8K,KAAM7a,KAAKyZ,cAEpBzZ,KAAKqa,eAAgBtK,GAAU/P,KAAKyN,OAAQoN,GAC5C7a,KAAKsa,WAAYO,GAAO9K,EACxBA,IAID,OAAO/P,KAAKqa,gBAIb5M,OAAQ,SAAW8N,GAQlB,YANwCjb,IAAnCN,KAAK8O,UAAWyM,IAEpBvb,KAAKyb,gBAAiBF,GAIhBvb,KAAK8O,UAAWyM,IAIxBE,gBAAiB,SAAWF,GAI3B,IAAI9W,EAAQzE,KACR8a,EAAM9a,KAAKyZ,cAAe8B,GAC1BG,EAAS,CAEZzM,KAAMsM,EACNhB,KAAMva,KAAKua,MAgBZ,SAASoB,EAAeC,EAAS7K,GAEhC,IAAK2K,EAAQE,GAAb,CAEA,IAhBoBzB,EAASvG,EAgBzBiI,EAAYpX,EAAMqX,iBAAkB/K,EAAO2K,GAC3CvD,EAAM1T,EAAMsX,aAjBI5B,EAiBqB1V,EAAM0V,QAf3B,iBAFSvG,EAiB2BiI,EAAUjI,MAf1B,KAARA,EACxB,GAGH,gBAAgBgD,KAAMhD,GAAeA,EAEnCuG,EAAUvG,IAWjBuE,EAAI6D,OAAOtX,KAAMmX,EAAU5V,OAC3BkS,EAAIvX,OAAO8D,KAAMmX,EAAUjb,QAE3BuX,EAAI8D,MAAQxX,EAAMgW,KAClBtC,EAAI+D,MAAQzX,EAAMgW,KAElBiB,EAAQE,GAAYzD,GAIrB,IAAM,IAAI6C,KAAQF,EAAM,CAEvB,IACIqB,EADApL,EAAQ+J,EAAKE,GAGjB,GAAe,KAAVjK,EAEL,OAASiK,EAAKnE,eAIb,IAAK,KAIJ6E,EAAO9b,OAAQ,IAAIwc,OAAQtK,UAAWf,GAEtC,MAED,IAAK,KAGJ2K,EAAOW,UAAW,IAAID,OAAQtK,UAAWf,GAEzC,MAED,IAAK,KAGJ2K,EAAOY,UAAW,IAAIF,OAAQtK,UAAWf,GAEzC,MAED,IAAK,SAIJ4K,EAAe,MAAO5K,GAEtB,MAED,IAAK,SAIJ4K,EAAe,cAAe5K,GAE9B,MAED,IAAK,SAIJ4K,EAAe,cAAe5K,GAE9B,MAED,IAAK,OAEJ4K,EAAe,YAAa5K,GAE5B,MAED,IAAK,WACL,IAAK,OAIJ4K,EAAe,UAAW5K,GAE1B,MAED,IAAK,QAIJ4K,EAAe,WAAY5K,GAC3B2K,EAAOa,aAAc,EAErB,MAED,IAAK,KAKJb,EAAOc,UAAYhH,WAAYzE,GAE/B,MAED,IAAK,KACJoL,EAAI3G,WAAYzE,IAEP,IAER2K,EAAOe,QAAUN,EACjBT,EAAOa,aAAc,GAItB,MAED,IAAK,KACJJ,EAAI3G,WAAYzE,GAEX/Q,KAAKoa,SAAWpa,KAAKoa,QAAQsC,mBAAmBP,EAAI,EAAIA,GAExDA,EAAI,IAERT,EAAOe,QAAU,EAAIN,EACrBT,EAAOa,aAAc,IAczB,OADAvc,KAAK8O,UAAWyM,GAAiB,IAAIlD,MAAmBqD,GACjD1b,KAAK8O,UAAWyM,IAIxBO,iBAAkB,SAAW/K,EAAO4L,GAEnC,IAQIjD,EARAmC,EAAY,CAEf5V,MAAO,IAAIoC,MAAS,EAAG,GACvBzH,OAAQ,IAAIyH,MAAS,EAAG,IAIrBuU,EAAQ7L,EAAMgE,MAAO,OA+BzB,OA5BA2E,EAAMkD,EAAMhI,QAAS,SAET,IAEX+H,EAAUE,UAAYrH,WAAYoH,EAAOlD,EAAM,IAC/CkD,EAAM9M,OAAQ4J,EAAK,KAIpBA,EAAMkD,EAAMhI,QAAS,QAET,IAEXiH,EAAU5V,MAAMO,IAAKgP,WAAYoH,EAAOlD,EAAM,IAAOlE,WAAYoH,EAAOlD,EAAM,KAC9EkD,EAAM9M,OAAQ4J,EAAK,KAIpBA,EAAMkD,EAAMhI,QAAS,QAET,IAEXiH,EAAUjb,OAAO4F,IAAKgP,WAAYoH,EAAOlD,EAAM,IAAOlE,WAAYoH,EAAOlD,EAAM,KAC/EkD,EAAM9M,OAAQ4J,EAAK,IAIpBmC,EAAUjI,IAAMgJ,EAAM1c,KAAM,KAAMmV,OAC3BwG,GAIRE,YAAa,SAAWnI,EAAKkJ,EAASjJ,EAAQC,EAAYC,GAEzD,IAAIgJ,EACAvJ,OAA6BlT,IAAjBN,KAAKwT,QAA0BxT,KAAKwT,QAAUwJ,MAC1DhJ,EAASR,EAAQyJ,WAAYrJ,GAajC,OAXgB,OAAXI,IAEJA,EAAS,IAAIkJ,MAAe1J,IAIxBQ,EAAOgG,gBAAiBhG,EAAOgG,eAAgBha,KAAKia,aACzD8C,EAAU/I,EAAOL,KAAMC,EAAKC,EAAQC,EAAYC,QAE/BzT,IAAZwc,IAAwBC,EAAQD,QAAUA,GAExCC,I,IChiBYI,EACjB,WAAYrG,GACR,IAAIsG,EAAUC,EAAOC,EACjB5c,G,4FAFe,SAGnBV,KAAK8W,UAAYA,EAEjB,IAAIyG,EAAY,qBAEZC,EAAU1E,EADE1a,OAAOqf,SAAS1E,OAAOlE,QAAQ,MAAO,KAkHtD,SAAS6I,IACLN,EAASO,QAAQvf,OAAOwf,WAAYxf,OAAOyf,aAE3CP,EAAOQ,OAAS1f,OAAOwf,WAAaxf,OAAOyf,YAC3CP,EAAO1Y,yBAEPmZ,IAGJ,SAASA,IACLX,EAASW,OAAOV,EAAOC,GA1HxBE,EAAQQ,QACPT,EAAYC,EAAO,OAoBvB,YAEIJ,EAAW,IAAIa,MAAoB,CAAEC,WAAW,EAAMC,OAAO,KACpDC,cAAc,UAAW,GAClChB,EAASO,QAAQvf,OAAOwf,WAAYxf,OAAOyf,aAC3Ctf,SAASgC,KAAKC,YAAY4c,EAASzc,YAEnCyc,EAASiB,eAAiBJ,MAG1BZ,EAAQ,IAAIY,OAGZX,EAAS,IAAIW,MACT,GACA7f,OAAOwf,WAAaxf,OAAOyf,YAC3B,EACA,MAEGja,SAAS4C,KAAK,GAAI,EAAG,IAC5B6W,EAAMjX,IAAIkX,GAmBV,IAAM9J,EAAU,IAAIyK,OAhBpB,WAII/c,QAAQod,IAAI,WAAY5d,GA5ChC,SAAoBA,GAChBA,EAAO6d,oBACP,IAAMC,GAAM,IAAIP,OAAaQ,cAAc/d,GAErCge,GADOF,EAAIG,QAAQ,IAAIV,OAAiBnU,SAC9B0U,EAAIG,WACdC,EAASJ,EAAIK,UAAU,IAAIZ,OACjCvd,EAAOkD,SAASwH,GAAK1K,EAAOkD,SAASwH,EAAIwT,EAAOxT,EAChD1K,EAAOkD,SAASyH,GAAK3K,EAAOkD,SAASyH,EAAIuT,EAAOvT,EAChD3K,EAAOkD,SAASqO,GAAKvR,EAAOkD,SAASqO,EAAI2M,EAAO3M,EAChDqL,EAAO1Z,SAASc,KAAKka,GACjBF,EAAQtT,EAAIsT,EAAQrT,EACpBiS,EAAO1Z,SAASqO,GAAkB,IAAbyM,EAAQtT,EAE7BkS,EAAO1Z,SAASqO,EAAgB,EAAZyM,EAAQrT,EAEhCiS,EAAOhX,OAAO,EAAG,EAAG,GA8BhBwY,CAAWpe,GACX2c,EAAMjX,IAAI1F,MAgBd,SAASoT,EAAWiL,GAChB,GAAIA,EAAIC,iBAAkB,CACtB,IAAMC,EAAmBF,EAAIG,OAASH,EAAII,MAAS,IACnDje,QAAQod,IACJ,SAAWrgB,KAAKmhB,MAAMH,EAAiB,GAAK,iBAKxD,SAASlL,KAbTP,EAAQM,WAAa,SAAUuL,EAAMH,EAAQC,GACzCje,QAAQod,IAAIe,EAAMH,EAAQC,IAc9B,IAAMG,EAAW,IAAI7e,EAAc6c,EAAQF,EAASzc,YACpD2e,EAAShb,iBAAiB,SAAUyZ,GACpCuB,EAAS9d,YAAc,IACvB8d,EAAS7d,YAAc,IACvB6d,EAAS/c,WAAY,EACrB+c,EAASrd,eAAgB,EAIzBob,EAAMjX,IAAI,IAAI6X,MAAmB,SAAU,KAG3C,IAAMsB,EAAQ,IAAItB,MAAiB,SAAU,KAC7CX,EAAOlX,IAAImZ,GACX,IAAMC,EAAY,IAAI3G,EAAUrF,GAC1BQ,EAAS,IAAIlG,EAAU0F,GAC7BgM,EACKtL,QAAQ,2DACRP,KAFL,UAEa4J,EAFb,SAE8B,SAAUzO,GAChCA,EAAUuM,UACVrH,EAAOW,aAAa7F,GACpB5N,QAAQod,IAAI,OACZtK,EAAOL,KAAP,iEAAsE4J,EAAtE,SACI,SAAUkC,GACNve,QAAQod,IAAI,OACZ5d,EAAS+e,IAEb3L,EACAC,MAIZ3V,OAAOkG,iBAAiB,SAAUoZ,GAqBtCgC,GALA,SAASC,IACLC,sBAAsBD,GACtB5B,IAIJ4B,KC3IR,WAEE,GAAIE,QAEG,CACL,IAAM/I,EAAYvY,SAASuhB,eAAe,gBAC1C,IAAI3C,EAAKrG,QAHT+I,wBAOJH,K","file":"main.bundle.js","sourcesContent":["import TWEEN from '@tweenjs/tween.js';\n\n// This object contains the state of the app\nexport default {\n  isDev: false,\n  isShowingStats: true,\n  isLoaded: false,\n  isTweening: false,\n  isRotating: true,\n  isMouseMoving: false,\n  isMouseOver: false,\n  maxAnisotropy: 1,\n  dpr: 1,\n  easing: TWEEN.Easing.Quadratic.InOut,\n  duration: 500,\n  model: {\n    selected: 0,\n    initialTypes: ['gltf', 'object'],\n    type: 'gltf'\n  },\n  models: [\n    {\n      path: './assets/models/duck.gltf',\n      scale: 20,\n      type: 'gltf'\n    },\n    {\n      path: './assets/models/Teapot.json',\n      scale: 20,\n      type: 'object'\n    }\n  ],\n  texture: {\n    path: './assets/textures/',\n    imageFiles: [\n      { name: 'UV', image: 'UV_Grid_Sm.jpg' }\n    ]\n  },\n  mesh: {\n    enableHelper: true,\n    wireframe: false,\n    translucent: false,\n    material: {\n      color: 0xffffff,\n      emissive: 0xffffff\n    }\n  },\n  fog: {\n    color: 0xffffff,\n    near: 0.0008\n  },\n  camera: {\n    fov: 40,\n    near: 2,\n    far: 1000,\n    aspect: 1,\n    posX: 0,\n    posY: 30,\n    posZ: 40\n  },\n  controls: {\n    autoRotate: true,\n    autoRotateSpeed: -0.5,\n    rotateSpeed: 0.5,\n    zoomSpeed: 0.8,\n    minDistance: 200,\n    maxDistance: 600,\n    minPolarAngle: Math.PI / 5,\n    maxPolarAngle: Math.PI / 2,\n    minAzimuthAngle: -Infinity,\n    maxAzimuthAngle: Infinity,\n    enableDamping: true,\n    dampingFactor: 0.5,\n    enableZoom: true,\n    target: {\n      x: 0,\n      y: 0,\n      z: 0\n    }\n  },\n  ambientLight: {\n    enabled: true,\n    color: 0x141414\n  },\n  directionalLight: {\n    enabled: true,\n    color: 0xf0f0f0,\n    intensity: 0.4,\n    x: -75,\n    y: 280,\n    z: 150\n  },\n  shadow: {\n    enabled: true,\n    helperEnabled: true,\n    bias: 0,\n    mapWidth: 2048,\n    mapHeight: 2048,\n    near: 250,\n    far: 400,\n    top: 100,\n    right: 100,\n    bottom: -100,\n    left: -100\n  },\n  pointLight: {\n    enabled: true,\n    color: 0xffffff,\n    intensity: 0.34,\n    distance: 115,\n    x: 0,\n    y: 0,\n    z: 0\n  },\n  hemiLight: {\n    enabled: true,\n    color: 0xc8c8c8,\n    groundColor: 0xffffff,\n    intensity: 0.55,\n    x: 0,\n    y: 0,\n    z: 0\n  }\n};\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nexport default {\n  canvas: !!window.CanvasRenderingContext2D,\n  webgl: (function() {\n    try {\n      var canvas = document.createElement('canvas');\n\n      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch(e) {\n      return false;\n    }\n  })(),\n\n  workers: !!window.Worker,\n  fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n  getWebGLErrorMessage: function() {\n    var element = document.createElement('div');\n    element.id = 'webgl-error-message';\n    element.style.fontFamily = 'monospace';\n    element.style.fontSize = '13px';\n    element.style.fontWeight = 'normal';\n    element.style.textAlign = 'center';\n    element.style.background = '#fff';\n    element.style.color = '#000';\n    element.style.padding = '1.5em';\n    element.style.width = '400px';\n    element.style.margin = '5em auto 0';\n\n    if(!this.webgl) {\n      element.innerHTML = window.WebGLRenderingContext ? [\n        'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000000\">WebGL</a>.<br />',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000000\">here</a>.'\n      ].join('\\n') : [\n        'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000000\">WebGL</a>.<br/>',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000000\">here</a>.'\n      ].join('\\n');\n    }\n\n    return element;\n  },\n\n  addGetWebGLMessage: function(parameters) {\n    var parent, id, element;\n\n    parameters = parameters || {};\n\n    parent = parameters.parent !== undefined ? parameters.parent : document.body;\n    id = parameters.id !== undefined ? parameters.id : 'oldie';\n\n    element = this.getWebGLErrorMessage();\n    element.id = id;\n\n    parent.appendChild(element);\n  }\n};\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// the target DOM element for key events\n\tthis._domElementKeyEvents = null;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().invert();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t}\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","import {\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLineBasicMaterial,\n\tLineSegments,\n\tLoader,\n\tMaterial,\n\tMesh,\n\tMeshPhongMaterial,\n\tPoints,\n\tPointsMaterial,\n\tVector3\n} from 'three';\n\nvar OBJLoader = ( function () {\n\n\t// o object_name | g group_name\n\tvar object_pattern = /^[og]\\s*(.+)?/;\n\t// mtllib file_reference\n\tvar material_library_pattern = /^mtllib /;\n\t// usemtl material_name\n\tvar material_use_pattern = /^usemtl /;\n\t// usemap map_name\n\tvar map_use_pattern = /^usemap /;\n\n\tvar vA = new Vector3();\n\tvar vB = new Vector3();\n\tvar vC = new Vector3();\n\n\tvar ab = new Vector3();\n\tvar cb = new Vector3();\n\n\tfunction ParserState() {\n\n\t\tvar state = {\n\t\t\tobjects: [],\n\t\t\tobject: {},\n\n\t\t\tvertices: [],\n\t\t\tnormals: [],\n\t\t\tcolors: [],\n\t\t\tuvs: [],\n\n\t\t\tmaterials: {},\n\t\t\tmaterialLibraries: [],\n\n\t\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t\tthis.object = {\n\t\t\t\t\tname: name || '',\n\t\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\t\tgeometry: {\n\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\tcolors: [],\n\t\t\t\t\t\tuvs: [],\n\t\t\t\t\t\thasUVIndices: false\n\t\t\t\t\t},\n\t\t\t\t\tmaterials: [],\n\t\t\t\t\tsmooth: true,\n\n\t\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\t\tvar previous = this._finalize( false );\n\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\t\treturn material;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\n\t\t\t\t\t},\n\n\t\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\t\tfor ( var mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Inherit previous objects material.\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\t\tvar declared = previousMaterial.clone( 0 );\n\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t\t}\n\n\t\t\t\tthis.objects.push( this.object );\n\n\t\t\t},\n\n\t\t\tfinalize: function () {\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t\t},\n\n\t\t\taddVertex: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddVertexPoint: function ( a ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t\t},\n\n\t\t\taddVertexLine: function ( a ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t\t},\n\n\t\t\taddNormal: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.normals;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tvA.fromArray( src, a );\n\t\t\t\tvB.fromArray( src, b );\n\t\t\t\tvC.fromArray( src, c );\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tcb.normalize();\n\n\t\t\t\tdst.push( cb.x, cb.y, cb.z );\n\t\t\t\tdst.push( cb.x, cb.y, cb.z );\n\t\t\t\tdst.push( cb.x, cb.y, cb.z );\n\n\t\t\t},\n\n\t\t\taddColor: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.colors;\n\t\t\t\tvar dst = this.object.geometry.colors;\n\n\t\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddUV: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t\t},\n\n\t\t\taddDefaultUV: function () {\n\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( 0, 0 );\n\t\t\t\tdst.push( 0, 0 );\n\t\t\t\tdst.push( 0, 0 );\n\n\t\t\t},\n\n\t\t\taddUVLine: function ( a ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t\t},\n\n\t\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tvar ia = this.parseVertexIndex( a, vLen );\n\t\t\t\tvar ib = this.parseVertexIndex( b, vLen );\n\t\t\t\tvar ic = this.parseVertexIndex( c, vLen );\n\n\t\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t\t// normals\n\n\t\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\t\tvar nLen = this.normals.length;\n\n\t\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t\t}\n\n\t\t\t\t// uvs\n\n\t\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\t\tthis.addDefaultUV();\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\t\tvar index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\t\tthis.addColor( index );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tstate.startObject( '', false );\n\n\t\treturn state;\n\n\t}\n\n\t//\n\n\tfunction OBJLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.materials = null;\n\n\t}\n\n\tOBJLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: OBJLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\tif ( onError ) {\n\n\t\t\t\t\t\tonError( e );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tsetMaterials: function ( materials ) {\n\n\t\t\tthis.materials = materials;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( text ) {\n\n\t\t\tvar state = new ParserState();\n\n\t\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t\t}\n\n\t\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n\t\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t\t}\n\n\t\t\tvar lines = text.split( '\\n' );\n\t\t\tvar line = '', lineFirstChar = '';\n\t\t\tvar lineLength = 0;\n\t\t\tvar result = [];\n\n\t\t\t// Faster to just trim left side of the line. Use if available.\n\t\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\n\n\t\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\t\tline = lines[ i ];\n\n\t\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\t\tlineLength = line.length;\n\n\t\t\t\tif ( lineLength === 0 ) continue;\n\n\t\t\t\tlineFirstChar = line.charAt( 0 );\n\n\t\t\t\t// @todo invoke passed in handler if any\n\t\t\t\tif ( lineFirstChar === '#' ) continue;\n\n\t\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\t\tvar data = line.split( /\\s+/ );\n\n\t\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t\tstate.colors.push(\n\t\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] )\n\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\t\tvar lineData = line.substr( 1 ).trim();\n\t\t\t\t\tvar vertexData = lineData.split( /\\s+/ );\n\t\t\t\t\tvar faceVertices = [];\n\n\t\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\t\tfor ( var j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertexData[ j ];\n\n\t\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\t\tvar vertexParts = vertex.split( '/' );\n\t\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\t\tvar v1 = faceVertices[ 0 ];\n\n\t\t\t\t\tfor ( var j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar v2 = faceVertices[ j ];\n\t\t\t\t\t\tvar v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\t\tvar lineVertices = [], lineUVs = [];\n\n\t\t\t\t\tif ( line.indexOf( '/' ) === - 1 ) {\n\n\t\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\t\tvar parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\t\tvar lineData = line.substr( 1 ).trim();\n\t\t\t\t\tvar pointData = lineData.split( ' ' );\n\n\t\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t\t} else if ( ( result = object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// o object_name\n\t\t\t\t\t// or\n\t\t\t\t\t// g group_name\n\n\t\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\n\t\t\t\t\tvar name = ( ' ' + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\n\n\t\t\t\t\tstate.startObject( name );\n\n\t\t\t\t} else if ( material_use_pattern.test( line ) ) {\n\n\t\t\t\t\t// material\n\n\t\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t\t} else if ( material_library_pattern.test( line ) ) {\n\n\t\t\t\t\t// mtl file\n\n\t\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t\t} else if ( map_use_pattern.test( line ) ) {\n\n\t\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t\t// smooth shading\n\n\t\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t * or\n\t\t\t\t\t * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Handle null terminated files without exception\n\t\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.finalize();\n\n\t\t\tvar container = new Group();\n\t\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\t\tvar hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\t\tif ( hasPrimitives === true ) {\n\n\t\t\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar object = state.objects[ i ];\n\t\t\t\t\tvar geometry = object.geometry;\n\t\t\t\t\tvar materials = object.materials;\n\t\t\t\t\tvar isLine = ( geometry.type === 'Line' );\n\t\t\t\t\tvar isPoints = ( geometry.type === 'Points' );\n\t\t\t\t\tvar hasVertexColors = false;\n\n\t\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\t\tvar buffergeometry = new BufferGeometry();\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n\t\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create materials\n\n\t\t\t\t\tvar createdMaterials = [];\n\n\t\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tvar sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tvar materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\t\tvar material = state.materials[ materialHash ];\n\n\t\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n\t\t\t\t\t\t\t\tvar materialLine = new LineBasicMaterial();\n\t\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n\t\t\t\t\t\t\t\tvar materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\t\tmaterial = new LineBasicMaterial();\n\n\t\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\t\tmaterial = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create mesh\n\n\t\t\t\t\tvar mesh;\n\n\t\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\t\tvar sourceMaterial = materials[ mi ];\n\t\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials );\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh.name = object.name;\n\n\t\t\t\t\tcontainer.add( mesh );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\t\tvar material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\tvar buffergeometry = new BufferGeometry();\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( state.vertices, 3 ) );\n\n\t\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( state.colors, 3 ) );\n\t\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar points = new Points( buffergeometry, material );\n\t\t\t\t\tcontainer.add( points );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn container;\n\n\t\t}\n\n\t} );\n\n\treturn OBJLoader;\n\n} )();\n\nexport { OBJLoader };\n","import {\n\tColor,\n\tDefaultLoadingManager,\n\tFileLoader,\n\tFrontSide,\n\tLoader,\n\tLoaderUtils,\n\tMeshPhongMaterial,\n\tRepeatWrapping,\n\tTextureLoader,\n\tVector2\n} from 'three';\n\n/**\n * Loads a Wavefront .mtl file specifying materials\n */\n\nvar MTLLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n};\n\nMTLLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MTLLoader,\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to load.\n\t */\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetMaterialOptions: function ( value ) {\n\n\t\tthis.materialOptions = value;\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @return {MTLLoader.MaterialCreator}\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to parse.\n\t */\n\tparse: function ( text, path ) {\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar info = {};\n\t\tvar delimiter_pattern = /\\s+/;\n\t\tvar materialsInfo = {};\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tvar line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar pos = line.indexOf( ' ' );\n\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' || key === 'ke' ) {\n\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.resourcePath || path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n} );\n\n/**\n * Create a new MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nMTLLoader.MaterialCreator = function ( baseUrl, options ) {\n\n\tthis.baseUrl = baseUrl || '';\n\tthis.options = options;\n\tthis.materialsInfo = {};\n\tthis.materials = {};\n\tthis.materialsArray = [];\n\tthis.nameLookup = {};\n\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : FrontSide;\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : RepeatWrapping;\n\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\tconstructor: MTLLoader.MaterialCreator,\n\n\tcrossOrigin: 'anonymous',\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetManager: function ( value ) {\n\n\t\tthis.manager = value;\n\n\t},\n\n\tsetMaterials: function ( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t},\n\n\tconvert: function ( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tvar converted = {};\n\n\t\tfor ( var mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tvar mat = materialsInfo[ mn ];\n\n\t\t\tvar covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( var prop in mat ) {\n\n\t\t\t\tvar save = true;\n\t\t\t\tvar value = mat[ prop ];\n\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t},\n\n\tpreload: function () {\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t},\n\n\tgetIndex: function ( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t},\n\n\tgetAsArray: function () {\n\n\t\tvar index = 0;\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t},\n\n\tcreate: function ( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tcreateMaterial_: function ( materialName ) {\n\n\t\t// Create material\n\n\t\tvar scope = this;\n\t\tvar mat = this.materialsInfo[ materialName ];\n\t\tvar params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tvar texParams = scope.getTextureParams( value, params );\n\t\t\tvar map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( var prop in mat ) {\n\n\t\t\tvar value = mat[ prop ];\n\t\t\tvar n;\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = new Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = new Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ke':\n\n\t\t\t\t\t// Emissive using RGB values\n\t\t\t\t\tparams.emissive = new Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( 'map', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( 'specularMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ke':\n\n\t\t\t\t\t// Emissive map\n\n\t\t\t\t\tsetMapForType( 'emissiveMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType( 'normalMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( 'bumpMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_d':\n\n\t\t\t\t\t// Alpha map\n\n\t\t\t\t\tsetMapForType( 'alphaMap', value );\n\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( n < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( this.options && this.options.invertTrProperty ) n = 1 - n;\n\n\t\t\t\t\tif ( n > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tgetTextureParams: function ( value, matParams ) {\n\n\t\tvar texParams = {\n\n\t\t\tscale: new Vector2( 1, 1 ),\n\t\t\toffset: new Vector2( 0, 0 )\n\n\t\t };\n\n\t\tvar items = value.split( /\\s+/ );\n\t\tvar pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t},\n\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tvar texture;\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : DefaultLoadingManager;\n\t\tvar loader = manager.getHandler( url );\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n};\n\nexport { MTLLoader };\n","import * as THREE from 'three';\nimport { OrbitControls } from \"./controls/OrbitControls.js\";\nimport { OBJLoader } from \"./loaders/OBJLoader.js\";\nimport { MTLLoader } from \"./loaders/MTLLoader.js\";\n\nfunction qs(search) {\n    if (typeof search !== \"string\" || !search) return search;\n    return search.split(\"&\").reduce((res, cur) => {\n        const arr = cur.split(\"=\");\n        return Object.assign({ [arr[0]]: arr[1] }, res)\n    }, {})\n}\n\nexport default class Main {\n    constructor(container) {\n        let renderer, scene, camera;\n        let object;\n        this.container = container\n\n        let modelName = 'VCOE2100080-S3R1_0'\n        let urlSearch = window.location.search.replace(/^\\?/, \"\")\n        let urlArgs = qs(urlSearch)\n        if(urlArgs.model)\n            modelName = urlArgs['model']\n\n\n        function setContent(object) {\n            object.updateMatrixWorld();\n            const box = new THREE.Box3().setFromObject(object);\n            const size = box.getSize(new THREE.Vector3()).length();\n            const boxSize = box.getSize();\n            const center = box.getCenter(new THREE.Vector3());\n            object.position.x += object.position.x - center.x;\n            object.position.y += object.position.y - center.y; //center.y\n            object.position.z += object.position.z - center.z;\n            camera.position.copy(center);\n            if (boxSize.x > boxSize.y) {\n                camera.position.z = -boxSize.x * -0.5;\n            } else {\n                camera.position.z = boxSize.y * 3;\n            }\n            camera.lookAt(0, 0, 0);\n        }\n        function init() {\n            // renderer\n            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n            renderer.setClearColor('#B8B8B8', 1.0);\n            renderer.setSize(window.innerWidth, window.innerHeight);\n            document.body.appendChild(renderer.domElement);\n\n            renderer.outputEncoding = THREE.sRGBEncoding;\n\n            // scene\n            scene = new THREE.Scene();\n\n            // camera\n            camera = new THREE.PerspectiveCamera(\n                40,\n                window.innerWidth / window.innerHeight,\n                1,\n                20000\n            );\n            camera.position.set(-10, 0, 23);\n            scene.add(camera);\n\n\n            function loadModel() {\n                // object.traverse(function (child) {\n\n                // });\n                console.log(\"object1:\", object);\n                setContent(object);\n                scene.add(object);\n                // container.querySelector('#loading').style.display = 'none';\n                // if(object) {\n                //     console.log(\"object:\", object);\n                //     setContent(object);\n                //     scene.add(object);\n                // }\n\n            }\n\n            const manager = new THREE.LoadingManager(loadModel);\n\n            manager.onProgress = function (item, loaded, total) {\n                console.log(item, loaded, total);\n            };\n\n            function onProgress(xhr) {\n                if (xhr.lengthComputable) {\n                    const percentComplete = (xhr.loaded / xhr.total) * 100;\n                    console.log(\n                        \"model \" + Math.round(percentComplete, 2) + \"% downloaded\"\n                    );\n                }\n            }\n\n            function onError() { }\n            // controls\n            const controls = new OrbitControls(camera, renderer.domElement);\n            controls.addEventListener(\"change\", render);\n            controls.minDistance = 100;\n            controls.maxDistance = 500;\n            controls.enablePan = true;\n            controls.enableDamping = true;\n            // controls.dampingFactor = .9;\n\n            // ambient\n            scene.add(new THREE.AmbientLight(0xffffff, 0.2));\n\n            // light\n            const light = new THREE.PointLight(0xffffff, 1.5);\n            camera.add(light);\n            const mtlloader = new MTLLoader(manager);\n            const loader = new OBJLoader(manager);\n            mtlloader\n                .setPath(\"https://liyang-assets.explorium.cn/3d/VCOE2100080-S3R1/\")\n                .load(`${modelName}.mtl`, function (materials) {\n                    materials.preload();\n                    loader.setMaterials(materials);\n                    console.log('111')\n                    loader.load(`https://liyang-assets.explorium.cn/3d/VCOE2100080-S3R1/${modelName}.obj`,\n                        function (obj) {\n                            console.log('222')\n                            object = obj;\n                        },\n                        onProgress,\n                        onError\n                    );\n                });\n\n            window.addEventListener(\"resize\", onWindowResize);\n        }\n\n        function onWindowResize() {\n            renderer.setSize(window.innerWidth, window.innerHeight);\n\n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n\n            render();\n        }\n\n        function render() {\n            renderer.render(scene, camera);\n        }\n\n        function animate() {\n            requestAnimationFrame(animate);\n            render();\n        }\n\n        init();\n        animate();\n    }\n\n}\n","import Config from './data/config';\nimport Detector from './utils/detector';\nimport Main from './app/main';\n\n// Styles\nimport './../css/app.scss';\n\n// Check environment and set the Config helper\nif(__ENV__ === 'dev') {\n  console.log('----- RUNNING IN DEV ENVIRONMENT! -----');\n\n  Config.isDev = true;\n}\n\nfunction init() {\n  // Check for webGL capabilities\n  if(!Detector.webgl) {\n    Detector.addGetWebGLMessage();\n  } else {\n    const container = document.getElementById('appContainer');\n    new Main(container);\n  }\n}\n\ninit();\n"],"sourceRoot":""}